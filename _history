{"entries":[{"timestamp":1762193975799,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":998,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</variable><variable id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</variable><variable id=\".qnK9!Hy?boJvCcY`ADQ\">piecesFound</variable><variable id=\"fMCO*r,aQyav[44x(*jo\">gameScore</variable><variable id=\"^VMDGkd$dZEWR,kD`BhO\">directions</variable><variable id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</variable><variable id=\"_#RiNQ|9]zq~%R8dodQX\">headingDiff</variable><variable id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</variable><variable id=\"e@b|{`]RHUfdB67$w?dn\">currentRoll</variable><variable id=\"rR/HeP#($tm#{08dq(1u\">distance</variable><variable id=\"HA$fG@z],8(`WwhB/3J^\">brightness</variable><variable id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</variable><variable id=\"k_f)n[c|8+L/!Q]Mak{k\">maxFreq</variable><variable id=\"bNN~A@HmShtW+P952R=#\">minFreq</variable><variable id=\"jU?nJ=vGY+#/vZQl:;F$\">frequency</variable></variables><comment x=\"1089.625\" y=\"2061\" w=\"340\" h=\"120\">\n"]]},{"start1":1011,"length1":80,"diffs":[[1,"</comment><comment x=\"1474.625\" y=\"2061\" w=\"480\" h=\"120\">\n"]]},{"start1":1119,"length1":80,"diffs":[[1,"</comment><comment x=\"1999.625\" y=\"2061\" w=\"390\" h=\"120\">\n"]]},{"start1":1217,"length1":80,"diffs":[[1,"</comment><comment x=\"2434.625\" y=\"2061\" w=\"160\" h=\"120\">\n"]]},{"start1":1287,"length1":80,"diffs":[[1,"</comment><comment x=\"2639.625\" y=\"2061\" w=\"300\" h=\"120\">\n"]]},{"start1":1376,"length1":80,"diffs":[[1,"</comment><comment x=\"2984.625\" y=\"2061\" w=\"260\" h=\"120\">\n"]]},{"start1":1461,"length1":80,"diffs":[[1,"</comment><comment x=\"3289.625\" y=\"2061\" w=\"250\" h=\"120\">\n"]]},{"start1":1545,"length1":80,"diffs":[[1,"</comment><comment x=\"3584.625\" y=\"2061\" w=\"320\" h=\"120\">\n"]]},{"start1":1636,"length1":80,"diffs":[[1,"</comment><comment x=\"3949.625\" y=\"2061\" w=\"210\" h=\"120\">\n"]]},{"start1":1716,"length1":80,"diffs":[[1,"</comment><comment x=\"4204.625\" y=\"2061\" w=\"190\" h=\"120\">\n"]]},{"start1":1794,"length1":695,"diffs":[[1,"</comment><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"input_compass_calibrate\"><comment pinned=\"false\" h=\"80\" w=\"160\">--- START CODE (Runs once on power-up) ---\nCalibrate the compass - this will prompt the user to tilt the micro:bit in a circle</comment><next><block type=\"device_print_message\"><comment pinned=\"false\" h=\"80\" w=\"160\">Show the title and instructions</comment><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">OCARINA OF PATH</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n"]]},{"start1":2455,"length1":42515,"diffs":[[1,"        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">A+B TO START</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><comment pinned=\"false\" h=\"80\" w=\"160\">Initialize variables</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\".qnK9!Hy?boJvCcY`ADQ\">piecesFound</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"fMCO*r,aQyav[44x(*jo\">gameScore</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"370\" y=\"20\"><field name=\"NAME\">Button.AB</field><comment pinned=\"false\" h=\"80\" w=\"160\">A+B to start the game from the instructions screen, or advance to the next level/reset</comment><data>0</data><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"startRound1\" functionid=\"qJ!,Qq?,{)^:YrpLfEu]\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start Game -&gt; Round 1</comment></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></value><statement name=\"DO1\"><block type=\"control_reset\"><comment pinned=\"false\" h=\"80\" w=\"160\">From Win/Lose screen, reset the game</comment></block></statement></block></statement></block><block type=\"device_button_event\" x=\"1221\" y=\"20\"><field name=\"NAME\">Button.A</field><comment pinned=\"false\" h=\"80\" w=\"160\">Button A for showing current score/status (DEBUGGING/CHECK)</comment><statement name=\"HANDLER\"><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">P: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\".qnK9!Hy?boJvCcY`ADQ\">piecesFound</field></block></value></block></value><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">S: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fMCO*r,aQyav[44x(*jo\">gameScore</field></block></value></block></value></block></next></block></statement></block><block type=\"device_forever\" x=\"1746\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">--- 5. Main Game Loop ---\nThis loop runs the active round's logic</comment><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"handleRound1\" functionid=\"ncTCik8qF/4GlUsU`6?Y\"></mutation></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"function_call\"><mutation name=\"handleRound2\" functionid=\"g)?M;Y8Q)NNYJxF=q,~J\"></mutation></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><statement name=\"DO2\"><block type=\"function_call\"><mutation name=\"handleRound3\" functionid=\"?zw/I0D6Y2R^~KJY*u%Z\"></mutation></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"><comment pinned=\"false\" h=\"80\" w=\"160\">Clear screen when not in an active round (e.g., instructions or win/lose screen)</comment></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Pause briefly to control execution speed (and for the time check)</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></statement></block><block type=\"device_gesture_event\" x=\"2240\" y=\"20\"><field name=\"NAME\">Gesture.Shake</field><comment pinned=\"false\" h=\"80\" w=\"160\">Must calibrate the compass first</comment><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Only count steps during Round 1</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement></block></statement></block><block type=\"function_definition\" x=\"2683\" y=\"20\"><mutation name=\"startRound1\" functionid=\"qJ!,Qq?,{)^:YrpLfEu]\"></mutation><field name=\"function_name\">startRound1</field><comment pinned=\"false\" h=\"80\" w=\"160\">--- 3. Round Functions ---\nROUND 1: Compass &amp; Steps (Easy)</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">R1: 1 PIECE</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"^VMDGkd$dZEWR,kD`BhO\">directions</field><comment pinned=\"false\" h=\"80\" w=\"160\">Pick a random cardinal direction (0=N, 90=E, 180=S, 270=W)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"4\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">180</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">270</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"^VMDGkd$dZEWR,kD`BhO\">directions</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"^VMDGkd$dZEWR,kD`BhO\">directions</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value></block></value><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">GO: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"function_call_output\"><mutation name=\"convertHeading\" functionid=\"rppXjTFx63yI7h7uS7RG\"><arg name=\"heading\" id=\"2ob1fkth6qv72sxu9yf9b\" type=\"number\"></arg></mutation><value name=\"2ob1fkth6qv72sxu9yf9b\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field></block></value></block></value></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3836\" y=\"20\"><mutation name=\"handleRound1\" functionid=\"ncTCik8qF/4GlUsU`6?Y\"></mutation><field name=\"function_name\">handleRound1</field><statement name=\"STACK\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Show steps taken on screen when Micro:bit is tilted up (Roll close to 0)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Roll</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">15</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Roll</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-15</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"_#RiNQ|9]zq~%R8dodQX\">headingDiff</field><comment pinned=\"false\" h=\"80\" w=\"160\">Success Condition: 20 steps taken AND facing the target direction</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_heading\"></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field></block></value></block></value></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Success Check (must be within +/- 20 degrees of target)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_#RiNQ|9]zq~%R8dodQX\">headingDiff</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_#RiNQ|9]zq~%R8dodQX\">headingDiff</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">340</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"gameSuccess\" functionid=\"LwIl=ZRd!XCG!NF$JD#8\"><arg name=\"pieces\" id=\"otn6agdwt37pqta5gj5ba\" type=\"number\"></arg><arg name=\"points\" id=\"i36sjr34geiuq7ykf55k\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Award 1 piece, 1 point</comment><value name=\"otn6agdwt37pqta5gj5ba\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"i36sjr34geiuq7ykf55k\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"function_call\"><mutation name=\"startRound2\" functionid=\"0%Lj[|Xd1He~5E1.O*of\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"device_print_message\"><comment pinned=\"false\" h=\"80\" w=\"160\">Give new clue if they walked 20 steps but in the wrong direction</comment><value name=\"text\"><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">Wrong Way! Find </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"function_call_output\"><mutation name=\"convertHeading\" functionid=\"rppXjTFx63yI7h7uS7RG\"><arg name=\"heading\" id=\"2ob1fkth6qv72sxu9yf9b\" type=\"number\"></arg></mutation><value name=\"2ob1fkth6qv72sxu9yf9b\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field><comment pinned=\"false\" h=\"80\" w=\"160\">Reset steps</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"20\" y=\"834\"><mutation name=\"startRound2\" functionid=\"0%Lj[|Xd1He~5E1.O*of\"></mutation><field name=\"function_name\">startRound2</field><comment pinned=\"false\" h=\"80\" w=\"160\">ROUND 2: LED Hot/Cold (Medium, 60s)</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 seconds time limit</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">60</field></shadow></value><next><block type=\"device_print_message\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">R2: 2 PIECES</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">HUNT: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">s</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field><comment pinned=\"false\" h=\"80\" w=\"160\">The 'treasure' is a specific roll (tilt) angle\nTarget tilt between flat and vertical</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">-90</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"649\" y=\"834\"><mutation name=\"handleRound2\" functionid=\"g)?M;Y8Q)NNYJxF=q,~J\"></mutation><field name=\"function_name\">handleRound2</field><statement name=\"STACK\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Time check (executed every 500ms in the forever loop)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Only run this check every 1000ms (1 second)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_running_time\"></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">500</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></statement></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"function_call\"><mutation name=\"gameFail\" functionid=\"Q6/7-(baxpR}+35xqTuR\"></mutation><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"true\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Stop the logic if time is up</comment></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"e@b|{`]RHUfdB67$w?dn\">currentRoll</field><comment pinned=\"false\" h=\"80\" w=\"160\">Distance to target tilt (Absolute difference from target Roll)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Roll</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"rR/HeP#($tm#{08dq(1u\">distance</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"e@b|{`]RHUfdB67$w?dn\">currentRoll</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"HA$fG@z],8(`WwhB/3J^\">brightness</field><comment pinned=\"false\" h=\"80\" w=\"160\">LED Brightness Feedback:\nCloser (smaller distance) = Brighter LED (0-9)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"rR/HeP#($tm#{08dq(1u\">distance</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">9</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"HA$fG@z],8(`WwhB/3J^\">brightness</field><comment pinned=\"false\" h=\"80\" w=\"160\">Clamp brightness between 0 and 9</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op2\"><field name=\"op\">min</field><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">9</field></shadow></value><value name=\"y\"><block type=\"math_op2\"><field name=\"op\">max</field><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"y\"><block type=\"variables_get\"><field name=\"VAR\" id=\"HA$fG@z],8(`WwhB/3J^\">brightness</field></block></value></block></value></block></value><next><block type=\"device_plot_brightness\"><comment pinned=\"false\" h=\"80\" w=\"160\">Show a single pixel that gets brighter as they get closer\nMultiply by 25 to get 0-255 range</comment><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">2</field></shadow></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">2</field></shadow></value><value name=\"brightness\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"HA$fG@z],8(`WwhB/3J^\">brightness</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Success Condition: Very close to the target tilt</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rR/HeP#($tm#{08dq(1u\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"gameSuccess\" functionid=\"LwIl=ZRd!XCG!NF$JD#8\"><arg name=\"pieces\" id=\"otn6agdwt37pqta5gj5ba\" type=\"number\"></arg><arg name=\"points\" id=\"i36sjr34geiuq7ykf55k\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Award 2 pieces, 2 points</comment><value name=\"otn6agdwt37pqta5gj5ba\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><value name=\"i36sjr34geiuq7ykf55k\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"function_call\"><mutation name=\"startRound3\" functionid=\"-B._py}O3ra]0|iXSCuR\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1527\" y=\"834\"><mutation name=\"startRound3\" functionid=\"-B._py}O3ra]0|iXSCuR\"></mutation><field name=\"function_name\">startRound3</field><comment pinned=\"false\" h=\"80\" w=\"160\">ROUND 3: Tone Metal Detector (Hard, 90s)</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field><comment pinned=\"false\" h=\"80\" w=\"160\">90 seconds time limit</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><next><block type=\"device_print_message\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">R3: 3 PIECES</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">HUNT: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">s</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field><comment pinned=\"false\" h=\"80\" w=\"160\">The 'treasure' is a specific compass heading</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">359</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2156\" y=\"834\"><mutation name=\"handleRound3\" functionid=\"?zw/I0D6Y2R^~KJY*u%Z\"></mutation><field name=\"function_name\">handleRound3</field><statement name=\"STACK\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Time check</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Only run this check every 1000ms (1 second)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_running_time\"></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">500</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></statement></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"function_call\"><mutation name=\"gameFail\" functionid=\"Q6/7-(baxpR}+35xqTuR\"></mutation><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"true\"></mutation></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field><comment pinned=\"false\" h=\"80\" w=\"160\">Distance to target heading</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_heading\"></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field></block></value></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Handle wrap-around (e.g., 350 to 10 degrees is 20, not 340)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">180</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">360</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field></block></value></block></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"k_f)n[c|8+L/!Q]Mak{k\">maxFreq</field><comment pinned=\"false\" h=\"80\" w=\"160\">Tone Feedback:\n"]]},{"start1":36526,"length1":11812,"diffs":[[1,"High pitch</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"bNN~A@HmShtW+P952R=#\">minFreq</field><comment pinned=\"false\" h=\"80\" w=\"160\">Low pitch</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"jU?nJ=vGY+#/vZQl:;F$\">frequency</field><comment pinned=\"false\" h=\"80\" w=\"160\">Map distance (0 to 180) to frequency (maxFreq to minFreq)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">180</field></shadow></value><value name=\"toLow\"><block type=\"variables_get\"><field name=\"VAR\" id=\"k_f)n[c|8+L/!Q]Mak{k\">maxFreq</field></block></value><value name=\"toHigh\"><block type=\"variables_get\"><field name=\"VAR\" id=\"bNN~A@HmShtW+P952R=#\">minFreq</field></block></value></block></value><next><block type=\"device_ring\"><comment pinned=\"false\" h=\"80\" w=\"160\">Play the tone in the background</comment><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">262</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"jU?nJ=vGY+#/vZQl:;F$\">frequency</field></block></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Target</field><comment pinned=\"false\" h=\"80\" w=\"160\">Show a hint icon on the screen</comment><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Success Condition: Very close to the target heading</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_rest\"><comment pinned=\"false\" h=\"80\" w=\"160\">Stop the tone</comment><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow><block type=\"math_number\"><field name=\"NUM\">100</field></block></value><next><block type=\"function_call\"><mutation name=\"gameSuccess\" functionid=\"LwIl=ZRd!XCG!NF$JD#8\"><arg name=\"pieces\" id=\"otn6agdwt37pqta5gj5ba\" type=\"number\"></arg><arg name=\"points\" id=\"i36sjr34geiuq7ykf55k\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Award 3 pieces, 3 points</comment><value name=\"otn6agdwt37pqta5gj5ba\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><value name=\"i36sjr34geiuq7ykf55k\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"function_call\"><mutation name=\"gameWin\" functionid=\"9,iA|rD3vhVRb.Vuj@o|\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3201\" y=\"834\"><mutation name=\"convertHeading\" functionid=\"rppXjTFx63yI7h7uS7RG\"><arg name=\"heading\" id=\"2ob1fkth6qv72sxu9yf9b\" type=\"number\"></arg></mutation><field name=\"function_name\">convertHeading</field><comment pinned=\"false\" h=\"80\" w=\"160\">--- 4. Utility and Feedback Functions ---\nConvert heading number to a cardinal direction string</comment><value name=\"2ob1fkth6qv72sxu9yf9b\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">heading</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">315</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">45</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">NORTH</field></block></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">45</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">135</field></shadow></value></block></value></block></value><statement name=\"DO1\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">EAST</field></block></value></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">135</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">225</field></shadow></value></block></value></block></value><statement name=\"DO2\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">SOUTH</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">WEST</field></block></value></block></statement></block></statement></block><block type=\"function_definition\" x=\"4006\" y=\"834\"><mutation name=\"gameSuccess\" functionid=\"LwIl=ZRd!XCG!NF$JD#8\"><arg name=\"pieces\" id=\"otn6agdwt37pqta5gj5ba\" type=\"number\"></arg><arg name=\"points\" id=\"i36sjr34geiuq7ykf55k\" type=\"number\"></arg></mutation><field name=\"function_name\">gameSuccess</field><value name=\"otn6agdwt37pqta5gj5ba\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">pieces</field></block></value><value name=\"i36sjr34geiuq7ykf55k\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">points</field></block></value><statement name=\"STACK\"><block type=\"variables_change\"><field name=\"VAR\" id=\".qnK9!Hy?boJvCcY`ADQ\">piecesFound</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">pieces</field></block></value><next><block type=\"variables_change\"><field name=\"VAR\" id=\"fMCO*r,aQyav[44x(*jo\">gameScore</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">points</field></block></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n"]]},{"start1":46118,"length1":6848,"diffs":[[1,"        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">Visual: Ocarina piece icon</comment><next><block type=\"controls_if\"><mutation elseif=\"2\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Sound (Different for each level)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"playMelody\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"C5 B A G F E D C \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">200</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"playMelody\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"G B A G C5 B A B \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">200</field></shadow></value></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><statement name=\"DO2\"><block type=\"playMelody\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"C D E F G A B C5 \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">150</field></shadow></value></block></statement><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">FOUND </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">pieces</field></block></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"> PIECES!</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"20\" y=\"2061\"><mutation name=\"gameFail\" functionid=\"Q6/7-(baxpR}+35xqTuR\"></mutation><field name=\"function_name\">gameFail</field><statement name=\"STACK\"><block type=\"device_rest\"><comment pinned=\"false\" h=\"80\" w=\"160\">Stop the music just in case Round 3 was active</comment><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow><block type=\"math_number\"><field name=\"NUM\">100</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field><comment pinned=\"false\" h=\"80\" w=\"160\">Visual</comment><next><block type=\"device_print_message\"><comment pinned=\"false\" h=\"80\" w=\"160\">Message</comment><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">TRY AGAIN?</field></shadow></value><next><block type=\"playMelody\"><comment pinned=\"false\" h=\"80\" w=\"160\">Sound\nAnnoying sound</comment><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"C C C C C C C C \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"device_pause\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">A+B TO RESET</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"547\" y=\"2061\"><mutation name=\"gameWin\" functionid=\"9,iA|rD3vhVRb.Vuj@o|\"></mutation><field name=\"function_name\">gameWin</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">YOU FOUND THE OCARINA OF PATH!</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n"]]},{"start1":51683,"length1":908,"diffs":[[1,"        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">Visual: Full Ocarina/Treasure</comment><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">SCORE: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fMCO*r,aQyav[44x(*jo\">gameScore</field></block></value></block></value><next><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">A+B TO RESET</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":257,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"}]}],"snapshots":[{"timestamp":1762193975798,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</variable><variable id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</variable><variable id=\".qnK9!Hy?boJvCcY`ADQ\">piecesFound</variable><variable id=\"fMCO*r,aQyav[44x(*jo\">gameScore</variable><variable id=\"^VMDGkd$dZEWR,kD`BhO\">directions</variable><variable id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</variable><variable id=\"_#RiNQ|9]zq~%R8dodQX\">headingDiff</variable><variable id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</variable><variable id=\"e@b|{`]RHUfdB67$w?dn\">currentRoll</variable><variable id=\"rR/HeP#($tm#{08dq(1u\">distance</variable><variable id=\"HA$fG@z],8(`WwhB/3J^\">brightness</variable><variable id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</variable><variable id=\"k_f)n[c|8+L/!Q]Mak{k\">maxFreq</variable><variable id=\"bNN~A@HmShtW+P952R=#\">minFreq</variable><variable id=\"jU?nJ=vGY+#/vZQl:;F$\">frequency</variable></variables><comment x=\"1089.625\" y=\"2061\" w=\"340\" h=\"120\">\nMicro:bit Project: Ocarina of Path\n</comment><comment x=\"1474.625\" y=\"2061\" w=\"480\" h=\"120\">\nA treasure hunt game using the Micro:bit sensors.\n</comment><comment x=\"1999.625\" y=\"2061\" w=\"390\" h=\"120\">\n--- 1. Variables and Initialization ---\n</comment><comment x=\"2434.625\" y=\"2061\" w=\"160\" h=\"120\">\nGame State:\n</comment><comment x=\"2639.625\" y=\"2061\" w=\"300\" h=\"120\">\n0: Instructions / Start Screen\n</comment><comment x=\"2984.625\" y=\"2061\" w=\"260\" h=\"120\">\n1: Round 1 (Compass/Steps)\n</comment><comment x=\"3289.625\" y=\"2061\" w=\"250\" h=\"120\">\n2: Round 2 (LED Hot/Cold)\n</comment><comment x=\"3584.625\" y=\"2061\" w=\"320\" h=\"120\">\n3: Round 3 (Tone/Metal Detector)\n</comment><comment x=\"3949.625\" y=\"2061\" w=\"210\" h=\"120\">\n4: Win/Treasure Found\n</comment><comment x=\"4204.625\" y=\"2061\" w=\"190\" h=\"120\">\n5: Try Again / Fail\n</comment><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"input_compass_calibrate\"><comment pinned=\"false\" h=\"80\" w=\"160\">--- START CODE (Runs once on power-up) ---\nCalibrate the compass - this will prompt the user to tilt the micro:bit in a circle</comment><next><block type=\"device_print_message\"><comment pinned=\"false\" h=\"80\" w=\"160\">Show the title and instructions</comment><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">OCARINA OF PATH</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . # # # . \n        # . . . # \n        # . # . # \n        # . . . # \n        . # # # .\n        `</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">A+B TO START</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><comment pinned=\"false\" h=\"80\" w=\"160\">Initialize variables</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\".qnK9!Hy?boJvCcY`ADQ\">piecesFound</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"fMCO*r,aQyav[44x(*jo\">gameScore</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"370\" y=\"20\"><field name=\"NAME\">Button.AB</field><comment pinned=\"false\" h=\"80\" w=\"160\">A+B to start the game from the instructions screen, or advance to the next level/reset</comment><data>0</data><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"startRound1\" functionid=\"qJ!,Qq?,{)^:YrpLfEu]\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start Game -&gt; Round 1</comment></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value></block></value><statement name=\"DO1\"><block type=\"control_reset\"><comment pinned=\"false\" h=\"80\" w=\"160\">From Win/Lose screen, reset the game</comment></block></statement></block></statement></block><block type=\"device_button_event\" x=\"1221\" y=\"20\"><field name=\"NAME\">Button.A</field><comment pinned=\"false\" h=\"80\" w=\"160\">Button A for showing current score/status (DEBUGGING/CHECK)</comment><statement name=\"HANDLER\"><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">P: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\".qnK9!Hy?boJvCcY`ADQ\">piecesFound</field></block></value></block></value><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">S: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fMCO*r,aQyav[44x(*jo\">gameScore</field></block></value></block></value></block></next></block></statement></block><block type=\"device_forever\" x=\"1746\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">--- 5. Main Game Loop ---\nThis loop runs the active round's logic</comment><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"handleRound1\" functionid=\"ncTCik8qF/4GlUsU`6?Y\"></mutation></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"function_call\"><mutation name=\"handleRound2\" functionid=\"g)?M;Y8Q)NNYJxF=q,~J\"></mutation></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><statement name=\"DO2\"><block type=\"function_call\"><mutation name=\"handleRound3\" functionid=\"?zw/I0D6Y2R^~KJY*u%Z\"></mutation></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"><comment pinned=\"false\" h=\"80\" w=\"160\">Clear screen when not in an active round (e.g., instructions or win/lose screen)</comment></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Pause briefly to control execution speed (and for the time check)</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></statement></block><block type=\"device_gesture_event\" x=\"2240\" y=\"20\"><field name=\"NAME\">Gesture.Shake</field><comment pinned=\"false\" h=\"80\" w=\"160\">Must calibrate the compass first</comment><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Only count steps during Round 1</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement></block></statement></block><block type=\"function_definition\" x=\"2683\" y=\"20\"><mutation name=\"startRound1\" functionid=\"qJ!,Qq?,{)^:YrpLfEu]\"></mutation><field name=\"function_name\">startRound1</field><comment pinned=\"false\" h=\"80\" w=\"160\">--- 3. Round Functions ---\nROUND 1: Compass &amp; Steps (Easy)</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">R1: 1 PIECE</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"^VMDGkd$dZEWR,kD`BhO\">directions</field><comment pinned=\"false\" h=\"80\" w=\"160\">Pick a random cardinal direction (0=N, 90=E, 180=S, 270=W)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\" inline=\"false\"><mutation items=\"4\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"ADD2\"><shadow type=\"math_number\"><field name=\"NUM\">180</field></shadow></value><value name=\"ADD3\"><shadow type=\"math_number\"><field name=\"NUM\">270</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_index_get\"><value name=\"LIST\"><block type=\"variables_get\"><field name=\"VAR\" id=\"^VMDGkd$dZEWR,kD`BhO\">directions</field></block></value><value name=\"INDEX\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"^VMDGkd$dZEWR,kD`BhO\">directions</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value></block></value><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">GO: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"function_call_output\"><mutation name=\"convertHeading\" functionid=\"rppXjTFx63yI7h7uS7RG\"><arg name=\"heading\" id=\"2ob1fkth6qv72sxu9yf9b\" type=\"number\"></arg></mutation><value name=\"2ob1fkth6qv72sxu9yf9b\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field></block></value></block></value></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3836\" y=\"20\"><mutation name=\"handleRound1\" functionid=\"ncTCik8qF/4GlUsU`6?Y\"></mutation><field name=\"function_name\">handleRound1</field><statement name=\"STACK\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Show steps taken on screen when Micro:bit is tilted up (Roll close to 0)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Roll</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">15</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Roll</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-15</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"_#RiNQ|9]zq~%R8dodQX\">headingDiff</field><comment pinned=\"false\" h=\"80\" w=\"160\">Success Condition: 20 steps taken AND facing the target direction</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_heading\"></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field></block></value></block></value></block></value><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Success Check (must be within +/- 20 degrees of target)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_#RiNQ|9]zq~%R8dodQX\">headingDiff</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_#RiNQ|9]zq~%R8dodQX\">headingDiff</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">340</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"gameSuccess\" functionid=\"LwIl=ZRd!XCG!NF$JD#8\"><arg name=\"pieces\" id=\"otn6agdwt37pqta5gj5ba\" type=\"number\"></arg><arg name=\"points\" id=\"i36sjr34geiuq7ykf55k\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Award 1 piece, 1 point</comment><value name=\"otn6agdwt37pqta5gj5ba\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"i36sjr34geiuq7ykf55k\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"function_call\"><mutation name=\"startRound2\" functionid=\"0%Lj[|Xd1He~5E1.O*of\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"device_print_message\"><comment pinned=\"false\" h=\"80\" w=\"160\">Give new clue if they walked 20 steps but in the wrong direction</comment><value name=\"text\"><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">Wrong Way! Find </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"function_call_output\"><mutation name=\"convertHeading\" functionid=\"rppXjTFx63yI7h7uS7RG\"><arg name=\"heading\" id=\"2ob1fkth6qv72sxu9yf9b\" type=\"number\"></arg></mutation><value name=\"2ob1fkth6qv72sxu9yf9b\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"pL`A)r$Qw)B?W[mxQK(m\">steps</field><comment pinned=\"false\" h=\"80\" w=\"160\">Reset steps</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"20\" y=\"834\"><mutation name=\"startRound2\" functionid=\"0%Lj[|Xd1He~5E1.O*of\"></mutation><field name=\"function_name\">startRound2</field><comment pinned=\"false\" h=\"80\" w=\"160\">ROUND 2: LED Hot/Cold (Medium, 60s)</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 seconds time limit</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">60</field></shadow></value><next><block type=\"device_print_message\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">R2: 2 PIECES</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">HUNT: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">s</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field><comment pinned=\"false\" h=\"80\" w=\"160\">The 'treasure' is a specific roll (tilt) angle\nTarget tilt between flat and vertical</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">-90</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"649\" y=\"834\"><mutation name=\"handleRound2\" functionid=\"g)?M;Y8Q)NNYJxF=q,~J\"></mutation><field name=\"function_name\">handleRound2</field><statement name=\"STACK\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Time check (executed every 500ms in the forever loop)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Only run this check every 1000ms (1 second)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_running_time\"></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">500</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></statement></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"function_call\"><mutation name=\"gameFail\" functionid=\"Q6/7-(baxpR}+35xqTuR\"></mutation><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"true\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Stop the logic if time is up</comment></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"e@b|{`]RHUfdB67$w?dn\">currentRoll</field><comment pinned=\"false\" h=\"80\" w=\"160\">Distance to target tilt (Absolute difference from target Roll)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Roll</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"rR/HeP#($tm#{08dq(1u\">distance</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"e@b|{`]RHUfdB67$w?dn\">currentRoll</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"HA$fG@z],8(`WwhB/3J^\">brightness</field><comment pinned=\"false\" h=\"80\" w=\"160\">LED Brightness Feedback:\nCloser (smaller distance) = Brighter LED (0-9)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"rR/HeP#($tm#{08dq(1u\">distance</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">9</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"HA$fG@z],8(`WwhB/3J^\">brightness</field><comment pinned=\"false\" h=\"80\" w=\"160\">Clamp brightness between 0 and 9</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op2\"><field name=\"op\">min</field><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">9</field></shadow></value><value name=\"y\"><block type=\"math_op2\"><field name=\"op\">max</field><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"y\"><block type=\"variables_get\"><field name=\"VAR\" id=\"HA$fG@z],8(`WwhB/3J^\">brightness</field></block></value></block></value></block></value><next><block type=\"device_plot_brightness\"><comment pinned=\"false\" h=\"80\" w=\"160\">Show a single pixel that gets brighter as they get closer\nMultiply by 25 to get 0-255 range</comment><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">2</field></shadow></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">2</field></shadow></value><value name=\"brightness\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"HA$fG@z],8(`WwhB/3J^\">brightness</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Success Condition: Very close to the target tilt</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rR/HeP#($tm#{08dq(1u\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"gameSuccess\" functionid=\"LwIl=ZRd!XCG!NF$JD#8\"><arg name=\"pieces\" id=\"otn6agdwt37pqta5gj5ba\" type=\"number\"></arg><arg name=\"points\" id=\"i36sjr34geiuq7ykf55k\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Award 2 pieces, 2 points</comment><value name=\"otn6agdwt37pqta5gj5ba\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><value name=\"i36sjr34geiuq7ykf55k\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"function_call\"><mutation name=\"startRound3\" functionid=\"-B._py}O3ra]0|iXSCuR\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1527\" y=\"834\"><mutation name=\"startRound3\" functionid=\"-B._py}O3ra]0|iXSCuR\"></mutation><field name=\"function_name\">startRound3</field><comment pinned=\"false\" h=\"80\" w=\"160\">ROUND 3: Tone Metal Detector (Hard, 90s)</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field><comment pinned=\"false\" h=\"80\" w=\"160\">90 seconds time limit</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><next><block type=\"device_print_message\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">R3: 3 PIECES</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">HUNT: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">s</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field><comment pinned=\"false\" h=\"80\" w=\"160\">The 'treasure' is a specific compass heading</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_random\"><value name=\"min\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"limit\"><shadow type=\"math_number\"><field name=\"NUM\">359</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2156\" y=\"834\"><mutation name=\"handleRound3\" functionid=\"?zw/I0D6Y2R^~KJY*u%Z\"></mutation><field name=\"function_name\">handleRound3</field><statement name=\"STACK\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Time check</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Only run this check every 1000ms (1 second)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_running_time\"></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">500</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></statement></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`TaU[NNEV-MPq?Z^:shf\">timeRemaining</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"function_call\"><mutation name=\"gameFail\" functionid=\"Q6/7-(baxpR}+35xqTuR\"></mutation><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"true\"></mutation></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field><comment pinned=\"false\" h=\"80\" w=\"160\">Distance to target heading</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_heading\"></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F*[|@9qictcBNW=8.J.6\">targetHeading</field></block></value></block></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Handle wrap-around (e.g., 350 to 10 degrees is 20, not 340)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">180</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">360</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field></block></value></block></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"k_f)n[c|8+L/!Q]Mak{k\">maxFreq</field><comment pinned=\"false\" h=\"80\" w=\"160\">Tone Feedback:\nCloser (smaller distance) = Higher Pitch/Frequency\nHigh pitch</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"bNN~A@HmShtW+P952R=#\">minFreq</field><comment pinned=\"false\" h=\"80\" w=\"160\">Low pitch</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"jU?nJ=vGY+#/vZQl:;F$\">frequency</field><comment pinned=\"false\" h=\"80\" w=\"160\">Map distance (0 to 180) to frequency (maxFreq to minFreq)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">180</field></shadow></value><value name=\"toLow\"><block type=\"variables_get\"><field name=\"VAR\" id=\"k_f)n[c|8+L/!Q]Mak{k\">maxFreq</field></block></value><value name=\"toHigh\"><block type=\"variables_get\"><field name=\"VAR\" id=\"bNN~A@HmShtW+P952R=#\">minFreq</field></block></value></block></value><next><block type=\"device_ring\"><comment pinned=\"false\" h=\"80\" w=\"160\">Play the tone in the background</comment><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">262</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"jU?nJ=vGY+#/vZQl:;F$\">frequency</field></block></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Target</field><comment pinned=\"false\" h=\"80\" w=\"160\">Show a hint icon on the screen</comment><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Success Condition: Very close to the target heading</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"qRMnIIMyL||}@J6X%5TN\">headingDiff2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_rest\"><comment pinned=\"false\" h=\"80\" w=\"160\">Stop the tone</comment><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow><block type=\"math_number\"><field name=\"NUM\">100</field></block></value><next><block type=\"function_call\"><mutation name=\"gameSuccess\" functionid=\"LwIl=ZRd!XCG!NF$JD#8\"><arg name=\"pieces\" id=\"otn6agdwt37pqta5gj5ba\" type=\"number\"></arg><arg name=\"points\" id=\"i36sjr34geiuq7ykf55k\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Award 3 pieces, 3 points</comment><value name=\"otn6agdwt37pqta5gj5ba\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><value name=\"i36sjr34geiuq7ykf55k\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"function_call\"><mutation name=\"gameWin\" functionid=\"9,iA|rD3vhVRb.Vuj@o|\"></mutation><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3201\" y=\"834\"><mutation name=\"convertHeading\" functionid=\"rppXjTFx63yI7h7uS7RG\"><arg name=\"heading\" id=\"2ob1fkth6qv72sxu9yf9b\" type=\"number\"></arg></mutation><field name=\"function_name\">convertHeading</field><comment pinned=\"false\" h=\"80\" w=\"160\">--- 4. Utility and Feedback Functions ---\nConvert heading number to a cardinal direction string</comment><value name=\"2ob1fkth6qv72sxu9yf9b\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">heading</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">315</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">45</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">NORTH</field></block></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">45</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">135</field></shadow></value></block></value></block></value><statement name=\"DO1\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">EAST</field></block></value></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">135</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">heading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">225</field></shadow></value></block></value></block></value><statement name=\"DO2\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">SOUTH</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">WEST</field></block></value></block></statement></block></statement></block><block type=\"function_definition\" x=\"4006\" y=\"834\"><mutation name=\"gameSuccess\" functionid=\"LwIl=ZRd!XCG!NF$JD#8\"><arg name=\"pieces\" id=\"otn6agdwt37pqta5gj5ba\" type=\"number\"></arg><arg name=\"points\" id=\"i36sjr34geiuq7ykf55k\" type=\"number\"></arg></mutation><field name=\"function_name\">gameSuccess</field><value name=\"otn6agdwt37pqta5gj5ba\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">pieces</field></block></value><value name=\"i36sjr34geiuq7ykf55k\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">points</field></block></value><statement name=\"STACK\"><block type=\"variables_change\"><field name=\"VAR\" id=\".qnK9!Hy?boJvCcY`ADQ\">piecesFound</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">pieces</field></block></value><next><block type=\"variables_change\"><field name=\"VAR\" id=\"fMCO*r,aQyav[44x(*jo\">gameScore</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">points</field></block></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . # # . . \n        # . . # . \n        # # # # # \n        . # # # . \n        . . # . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">Visual: Ocarina piece icon</comment><next><block type=\"controls_if\"><mutation elseif=\"2\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Sound (Different for each level)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"playMelody\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"C5 B A G F E D C \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">200</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"playMelody\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"G B A G C5 B A B \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">200</field></shadow></value></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><statement name=\"DO2\"><block type=\"playMelody\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"C D E F G A B C5 \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">150</field></shadow></value></block></statement><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">FOUND </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">pieces</field></block></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"> PIECES!</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"20\" y=\"2061\"><mutation name=\"gameFail\" functionid=\"Q6/7-(baxpR}+35xqTuR\"></mutation><field name=\"function_name\">gameFail</field><statement name=\"STACK\"><block type=\"device_rest\"><comment pinned=\"false\" h=\"80\" w=\"160\">Stop the music just in case Round 3 was active</comment><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow><block type=\"math_number\"><field name=\"NUM\">100</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field><comment pinned=\"false\" h=\"80\" w=\"160\">Visual</comment><next><block type=\"device_print_message\"><comment pinned=\"false\" h=\"80\" w=\"160\">Message</comment><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">TRY AGAIN?</field></shadow></value><next><block type=\"playMelody\"><comment pinned=\"false\" h=\"80\" w=\"160\">Sound\nAnnoying sound</comment><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"C C C C C C C C \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"device_pause\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">A+B TO RESET</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"547\" y=\"2061\"><mutation name=\"gameWin\" functionid=\"9,iA|rD3vhVRb.Vuj@o|\"></mutation><field name=\"function_name\">gameWin</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"PEKbeWd@=L9l;_y[e;S8\">gameState</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value><next><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">YOU FOUND THE OCARINA OF PATH!</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . # # # . \n        # # # # # \n        # . # . # \n        # # # # # \n        . # # # .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">Visual: Full Ocarina/Treasure</comment><next><block type=\"device_print_message\"><value name=\"text\"><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">SCORE: </field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fMCO*r,aQyav[44x(*jo\">gameScore</field></block></value></block></value><next><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">A+B TO RESET</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"","README.md":"","main.py":"\n","pxt.json":"{\n    \"name\": \"Ocarina of Path\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"stable8.0\",\n        \"tag\": \"v8.0.18\",\n        \"commits\": \"https://github.com/microsoft/pxt-microbit/commits/ec67ee1ad9a7c41ee95376e7577127b32d4d233a\",\n        \"target\": \"8.0.18\",\n        \"pxt\": \"12.0.16\"\n    },\n    \"preferredEditor\": \"blocksprj\"\n}\n"}}],"shares":[],"lastSaveTime":1762194537420}
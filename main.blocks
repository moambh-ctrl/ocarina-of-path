<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="PEKbeWd@=L9l;_y[e;S8">gameState</variable><variable id="pL`A)r$Qw)B?W[mxQK(m">steps</variable><variable id=".qnK9!Hy?boJvCcY`ADQ">piecesFound</variable><variable id="fMCO*r,aQyav[44x(*jo">gameScore</variable><variable id="^VMDGkd$dZEWR,kD`BhO">directions</variable><variable id="F*[|@9qictcBNW=8.J.6">targetHeading</variable><variable id="_#RiNQ|9]zq~%R8dodQX">headingDiff</variable><variable id="`TaU[NNEV-MPq?Z^:shf">timeRemaining</variable><variable id="e@b|{`]RHUfdB67$w?dn">currentRoll</variable><variable id="rR/HeP#($tm#{08dq(1u">distance</variable><variable id="HA$fG@z],8(`WwhB/3J^">brightness</variable><variable id="qRMnIIMyL||}@J6X%5TN">headingDiff2</variable><variable id="k_f)n[c|8+L/!Q]Mak{k">maxFreq</variable><variable id="bNN~A@HmShtW+P952R=#">minFreq</variable><variable id="jU?nJ=vGY+#/vZQl:;F$">frequency</variable></variables><comment id="$3Z6TB5jYk.C#[kKSKfU" x="1069" y="2041" w="340" h="120">
Micro:bit Project: Ocarina of Path
</comment><comment id="ZIISrhh[=5%}`ey0h2KX" x="1454" y="2041" w="480" h="120">
A treasure hunt game using the Micro:bit sensors.
</comment><comment id="|!eJ~new_CnQkBCN-tI;" x="1979" y="2041" w="390" h="120">
--- 1. Variables and Initialization ---
</comment><comment id="c1a~5`A=wbKpI3G-M3kL" x="2414" y="2041" w="160" h="120">
Game State:
</comment><comment id="zZOv7-.tH^~H+!O*:il9" x="2619" y="2041" w="300" h="120">
0: Instructions / Start Screen
</comment><comment id="*NEN]N%s?:yuipyvy=bz" x="2964" y="2041" w="260" h="120">
1: Round 1 (Compass/Steps)
</comment><comment id="e^tZ%aNB!==!Jku#mgrN" x="3269" y="2041" w="250" h="120">
2: Round 2 (LED Hot/Cold)
</comment><comment id="He6JLuU0JwGu1iQZa6%l" x="3564" y="2041" w="320" h="120">
3: Round 3 (Tone/Metal Detector)
</comment><comment id="FplBYHV3HfpiwoW{Qb25" x="3929" y="2041" w="210" h="120">
4: Win/Treasure Found
</comment><comment id="$a]J6LyO[^X+_,2:TKor" x="4184" y="2041" w="190" h="120">
5: Try Again / Fail
</comment><block type="pxt-on-start" id="H=oQu]6N:Wx[Hau5WH*|" x="0" y="0"><statement name="HANDLER"><block type="input_compass_calibrate" id="o4J4~[6oEK0TbEarokf["><comment pinned="false" h="80" w="160">--- START CODE (Runs once on power-up) ---
Calibrate the compass - this will prompt the user to tilt the micro:bit in a circle</comment><next><block type="device_print_message" id="#-gn5gz~@6_jj$/t[eRC"><comment pinned="false" h="80" w="160">Show the title and instructions</comment><value name="text"><shadow type="text" id="I[tm6ZE=5CsLc*R,t+.i"><field name="TEXT">OCARINA OF PATH</field></shadow></value><next><block type="device_show_leds" id=":%JK09#pad*0v?445NZ5"><field name="LEDS">`
        . # # # . 
        # . . . # 
        # . # . # 
        # . . . # 
        . # # # .
        `</field><next><block type="device_pause" id=":J[t|?(moyIU$F8)M=7m"><value name="pause"><shadow type="timePicker" id="1u%xDAU-X=}aq.dPPx:a"><field name="ms">1000</field></shadow></value><next><block type="device_print_message" id="^7,N}9qyli:2}UYc)k[A"><value name="text"><shadow type="text" id="Y8^r`0{[OAw0Wp(kt|um"><field name="TEXT">A+B TO START</field></shadow></value><next><block type="variables_set" id="LmV=wXd=Bl{RLn.vjT(5"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field><comment pinned="false" h="80" w="160">Initialize variables</comment><value name="VALUE"><shadow type="math_number" id="nbnH-oDtIpYcy8w`B9bw"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="Ii]RY6,KIe6q[z:~e{k{"><field name="VAR" id=".qnK9!Hy?boJvCcY`ADQ">piecesFound</field><value name="VALUE"><shadow type="math_number" id="AyJQb(m6M?~qpNtj$T{q"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="6GDeJ4G6iq%$aB67+lO%"><field name="VAR" id="fMCO*r,aQyav[44x(*jo">gameScore</field><value name="VALUE"><shadow type="math_number" id="d;w]Ax;8jH(prj|MWlrE"><field name="NUM">0</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_button_event" id="/-|Tf0FjjFhgi|buJ)J7" x="350" y="0"><field name="NAME">Button.AB</field><comment pinned="false" h="80" w="160">A+B to start the game from the instructions screen, or advance to the next level/reset</comment><data>0</data><statement name="HANDLER"><block type="controls_if" id="[8YDAgHYa|KQ{4O?Z@kP"><mutation elseif="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="#t*QD4.AD|q_+n8oI%[V"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="8amGqi]*%9~y|GPc82nl"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="A?w%?cV5$4S.Lk5hG)kB"><field name="NUM">0</field></shadow><block type="variables_get" id="Q5|(_;iVkuMD.1Qu1)eH"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field></block></value><value name="B"><shadow type="math_number" id="im;++r2}7~jew!lWM~$%"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="function_call" id="qokL6CEvWAxzNqpNm?SU"><mutation name="startRound1" functionid="qJ!,Qq?,{)^:YrpLfEu]"></mutation><comment pinned="false" h="80" w="160">Start Game -&gt; Round 1</comment></block></statement><value name="IF1"><shadow type="logic_boolean" id="6zRGNs-L01j]J~$._SOR"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="xAW=yJV%[gbylFQMwmx*"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="C#SGg8rESQqM=2A[3^gv"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="TOIT82(WjCd6/^.7uN{~"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="-Gf{F1p!f2|5/(z?NP(U"><field name="NUM">0</field></shadow><block type="variables_get" id="!yAS3~u|Ne{g%|N2=%On"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field></block></value><value name="B"><shadow type="math_number" id="2j1(ia:E{Iaez~]Lr=2:"><field name="NUM">4</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="hRSNNc@ATDk{BT4S#wU;"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="PgDhorP,b}TWh1L4O2pe"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="N#U)-xWs8MYk-/dv[$MH"><field name="NUM">0</field></shadow><block type="variables_get" id="]U.-oXPKZ/XsT7yH~yv8"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field></block></value><value name="B"><shadow type="math_number" id="HA~;SL2VL|lLVxX~l|27"><field name="NUM">5</field></shadow></value></block></value></block></value><statement name="DO1"><block type="control_reset" id="Y=Sn,(]hWW^k652%JKk^"><comment pinned="false" h="80" w="160">From Win/Lose screen, reset the game</comment></block></statement></block></statement></block><block type="device_button_event" id="5|:(k9[9xQ=]jZJ_!mdf" x="1201" y="0"><field name="NAME">Button.A</field><comment pinned="false" h="80" w="160">Button A for showing current score/status (DEBUGGING/CHECK)</comment><statement name="HANDLER"><block type="device_print_message" id="b{/tjS$XmHR#wdTzDQOs"><value name="text"><block type="text_join" id="i.Y+RkN)N~5j7YHm`!?,"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="BXrP8C*VQl,F//aJ5r{/"><field name="TEXT">P: </field></shadow></value><value name="ADD1"><shadow type="text" id="SE;thRUU8d@0~V}@74e~"><field name="TEXT"></field></shadow><block type="variables_get" id="b)/Z|*L3(ET,q-pq!Z$Z"><field name="VAR" id=".qnK9!Hy?boJvCcY`ADQ">piecesFound</field></block></value></block></value><next><block type="device_print_message" id="L`oJhUqyPA@5@{o0UI(["><value name="text"><block type="text_join" id="D8wuw%5MeG]!uA~S?Igi"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="9EHuxsQ{t.mn)!:RZqBi"><field name="TEXT">S: </field></shadow></value><value name="ADD1"><shadow type="text" id="t1@(AU|=_hAis:ns{T;G"><field name="TEXT"></field></shadow><block type="variables_get" id="O14cq|~UZ%#qePw#4gsh"><field name="VAR" id="fMCO*r,aQyav[44x(*jo">gameScore</field></block></value></block></value></block></next></block></statement></block><block type="device_forever" id="6f^hpkw|.l2!=D*c^wj5" x="1726" y="0"><comment pinned="false" h="80" w="160">--- 5. Main Game Loop ---
This loop runs the active round's logic</comment><statement name="HANDLER"><block type="controls_if" id="l+N8@$t|8Qgq47@?a{,E"><mutation elseif="2" else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="j9PiF}`6=y.M#c/6it8h"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Yh^^hwN*;/L%zaB(+,qE"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="o4njs-QIA;;DJYeTGFwf"><field name="NUM">0</field></shadow><block type="variables_get" id="xhGxcyDhXSNqWK|?x^%6"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field></block></value><value name="B"><shadow type="math_number" id="zuJ?kodnOam|q2EW{H:;"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="function_call" id="xd!KvoB{@E$F-%_rH{Dz"><mutation name="handleRound1" functionid="ncTCik8qF/4GlUsU`6?Y"></mutation></block></statement><value name="IF1"><shadow type="logic_boolean" id="ED2-chZcno)5rD`_lbJ%"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="}%rlYwKOt=_h5`yW4$Aa"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="BcJlb1;43oqFgit1b7)5"><field name="NUM">0</field></shadow><block type="variables_get" id="l{)VH@!k(z(!T1ZK;q-b"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field></block></value><value name="B"><shadow type="math_number" id="CR8nd7SJT;8{$Q;X3]{4"><field name="NUM">2</field></shadow></value></block></value><statement name="DO1"><block type="function_call" id="p`zHNiu~tguVqc?o/@Wk"><mutation name="handleRound2" functionid="g)?M;Y8Q)NNYJxF=q,~J"></mutation></block></statement><value name="IF2"><shadow type="logic_boolean" id="2f%jgPQMI(g[7q!f7-9e"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="P{#)lwEap[OMDa1^@OTH"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="zdEYTRB(RBk:*tcDm0E/"><field name="NUM">0</field></shadow><block type="variables_get" id="5g(96NA!f;;gd/.[}a_."><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field></block></value><value name="B"><shadow type="math_number" id="e|Wlh9U[3s:-:Z4o[fg!"><field name="NUM">3</field></shadow></value></block></value><statement name="DO2"><block type="function_call" id="?ZP%Sbnx9yh}US9qVL$C"><mutation name="handleRound3" functionid="?zw/I0D6Y2R^~KJY*u%Z"></mutation></block></statement><statement name="ELSE"><block type="device_clear_display" id="NelUv|t6qwBQjhE/Gwt5"><comment pinned="false" h="80" w="160">Clear screen when not in an active round (e.g., instructions or win/lose screen)</comment></block></statement><next><block type="device_pause" id="w(~fFaCKEHJ4YHD^bTfW"><comment pinned="false" h="80" w="160">Pause briefly to control execution speed (and for the time check)</comment><value name="pause"><shadow type="timePicker" id="?l}0XGOp:)*BDpW29dBw"><field name="ms">500</field></shadow></value></block></next></block></statement></block><block type="device_gesture_event" id=")j^YJL=K!lKBozhSMkcA" x="2220" y="0"><field name="NAME">Gesture.Shake</field><comment pinned="false" h="80" w="160">Must calibrate the compass first</comment><statement name="HANDLER"><block type="controls_if" id="CuI.Aniok^w=Haobgf%5"><comment pinned="false" h="80" w="160">Only count steps during Round 1</comment><value name="IF0"><shadow type="logic_boolean" id="D6Bi_76jw!6Kpm|OU/88"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="8qiN57_vjqH=/t}5sX`N"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="U66?)~X+a-}GT$wy_GT%"><field name="NUM">0</field></shadow><block type="variables_get" id="~v{ltLKaucZMj,lM5Q,y"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field></block></value><value name="B"><shadow type="math_number" id="n5ognDtGYp95C6{k7T5s"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="variables_change" id="(D~8^lHEr(.S-sB4Xp7;"><field name="VAR" id="pL`A)r$Qw)B?W[mxQK(m">steps</field><value name="VALUE"><shadow type="math_number" id="YMt5`iLnB+LPukaHIapc"><field name="NUM">1</field></shadow></value></block></statement></block></statement></block><block type="function_definition" id="#wexc0XL;t(@_yC.|PP;" x="2663" y="0"><mutation name="startRound1" functionid="qJ!,Qq?,{)^:YrpLfEu]"></mutation><field name="function_name">startRound1</field><comment pinned="false" h="80" w="160">--- 3. Round Functions ---
ROUND 1: Compass &amp; Steps (Easy)</comment><statement name="STACK"><block type="variables_set" id="6i7(/v6YfEs3:erllM[P"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field><value name="VALUE"><shadow type="math_number" id=";{+^vJxg%Y!ORvh6.zNO"><field name="NUM">1</field></shadow></value><next><block type="variables_set" id="qLz$hGN9CT11!Kz2n]{y"><field name="VAR" id="pL`A)r$Qw)B?W[mxQK(m">steps</field><value name="VALUE"><shadow type="math_number" id="OBTs/:P{qlQ$tqfZD5sf"><field name="NUM">0</field></shadow></value><next><block type="device_print_message" id="6yQwGM:hD%+2Oypvi%Q="><value name="text"><shadow type="text" id="!y(_LJTx?AB43VwX{@c)"><field name="TEXT">R1: 1 PIECE</field></shadow></value><next><block type="variables_set" id="zn7sIUSo8OTr]U(7=OoY"><field name="VAR" id="^VMDGkd$dZEWR,kD`BhO">directions</field><comment pinned="false" h="80" w="160">Pick a random cardinal direction (0=N, 90=E, 180=S, 270=W)</comment><value name="VALUE"><shadow type="math_number" id=")^-V?*fN5i]w]b1n?t+c"><field name="NUM">0</field></shadow><block type="lists_create_with" id="lkBZ`v^/R@LC03sXNJ%9" inline="false"><mutation items="4" horizontalafter="3"></mutation><value name="ADD0"><shadow type="math_number" id="vM1t-H[AWeHN%_cj4w3b"><field name="NUM">0</field></shadow></value><value name="ADD1"><shadow type="math_number" id="O4R[xcZ4M6~1qBcKBywN"><field name="NUM">90</field></shadow></value><value name="ADD2"><shadow type="math_number" id="c!P/+O10}3xcRr7JDo}{"><field name="NUM">180</field></shadow></value><value name="ADD3"><shadow type="math_number" id="Q@/%(;q%72}zGj]sg4++"><field name="NUM">270</field></shadow></value></block></value><next><block type="variables_set" id="$|!4AwmQ9~ZQiM2T%YKn"><field name="VAR" id="F*[|@9qictcBNW=8.J.6">targetHeading</field><value name="VALUE"><shadow type="math_number" id="x!YP.$G?N^u474GbFpMm"><field name="NUM">0</field></shadow><block type="lists_index_get" id="s2Lr4-wo/Gzko+e(ID33"><value name="LIST"><block type="variables_get" id="o,{!1b6[@^lJDi995459"><field name="VAR" id="^VMDGkd$dZEWR,kD`BhO">directions</field></block></value><value name="INDEX"><shadow type="math_number" id="[bh(Hs!JU1;5t}-grx^j"><field name="NUM">0</field></shadow><block type="device_random" id="W?E.`8[K~7k?E|Hy|{k2"><value name="min"><shadow type="math_number" id="[@EJ:f-P3JA;z0y-03ML"><field name="NUM">0</field></shadow></value><value name="limit"><block type="math_arithmetic" id="R(Gf4f^+^7Xg(DqT8mqs"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="Ir)7_/V|}%(7;YFrAwoy"><field name="NUM">0</field></shadow><block type="lists_length" id="A/s]P;9$9r=n=VZmQ:iW"><value name="VALUE"><block type="variables_get" id=")q:I`D:dCk5Z!sa-D8Ym"><field name="VAR" id="^VMDGkd$dZEWR,kD`BhO">directions</field></block></value></block></value><value name="B"><shadow type="math_number" id=")`4Z@+xS(ir3nAE=MD*:"><field name="NUM">1</field></shadow></value></block></value></block></value></block></value><next><block type="device_print_message" id="l15HO(-Z)eoBwuK[Lodd"><value name="text"><block type="text_join" id="WxkuVXOwMo0:oQJB5%A("><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="Pq|gsh(f+DkAz|QibT[="><field name="TEXT">GO: </field></shadow></value><value name="ADD1"><shadow type="text" id=",CKQHw1nv5XaYIFsA1h5"><field name="TEXT"></field></shadow><block type="function_call_output" id="JC2p-F5C/gZuZ_qS$N#e"><mutation name="convertHeading" functionid="rppXjTFx63yI7h7uS7RG"><arg name="heading" id="2ob1fkth6qv72sxu9yf9b" type="number"></arg></mutation><value name="2ob1fkth6qv72sxu9yf9b"><shadow type="math_number" id="sJpv7`QuTbkJT`RHRBAK"><field name="NUM">1</field></shadow><block type="variables_get" id="}m2NO4I|v$:qfxjMhg$."><field name="VAR" id="F*[|@9qictcBNW=8.J.6">targetHeading</field></block></value></block></value></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="5L~)OZM#XkpVEH{J}m2V" x="3816" y="0"><mutation name="handleRound1" functionid="ncTCik8qF/4GlUsU`6?Y"></mutation><field name="function_name">handleRound1</field><statement name="STACK"><block type="controls_if" id="Ll/7MjS$+;:PJJXx=3o}"><mutation else="1"></mutation><comment pinned="false" h="80" w="160">Show steps taken on screen when Micro:bit is tilted up (Roll close to 0)</comment><value name="IF0"><shadow type="logic_boolean" id="6SeQmEPB}EVbn.`ZLC!1"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="x/PPGjfqPYx[.Ub*4Brd"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="9@N5h;X-rSM5a|4dcE`f"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="NdGHkSaNg3x+7+]XNZ]E"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="/z2np~Z0^cuZ,RrmA,*t"><field name="NUM">0</field></shadow><block type="device_get_rotation" id="t/u@z_b1U[I0.Htrx:U@"><field name="NAME">Rotation.Roll</field></block></value><value name="B"><shadow type="math_number" id="Y4#5q%iwc0,f%KVaQ%R="><field name="NUM">15</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="V,S1%gmCYVb?FTI,!:FX"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="OR%a7hvL;^@Lp_E]k[2e"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="teBjU#w#kb(~Vk+YEj_S"><field name="NUM">0</field></shadow><block type="device_get_rotation" id="$Z1ozND!7wFs#?*25Y:E"><field name="NAME">Rotation.Roll</field></block></value><value name="B"><shadow type="math_number" id="=!zkgl=[M_s*}[_hc2o("><field name="NUM">-15</field></shadow></value></block></value></block></value><statement name="DO0"><block type="device_show_number" id="`?U-b`-;-7z0iO4QpRrs"><value name="number"><block type="variables_get" id="/R2q@Z(ZKWaI)z2ndgJ%"><field name="VAR" id="pL`A)r$Qw)B?W[mxQK(m">steps</field></block></value></block></statement><statement name="ELSE"><block type="device_clear_display" id="vnDLaluo3(l?7FMTzGD`"></block></statement><next><block type="variables_set" id="U*B/j6Mp[N*huASC[pc:"><field name="VAR" id="_#RiNQ|9]zq~%R8dodQX">headingDiff</field><comment pinned="false" h="80" w="160">Success Condition: 20 steps taken AND facing the target direction</comment><value name="VALUE"><shadow type="math_number" id="6BZJ/ceK2a#qWrRGlp#b"><field name="NUM">0</field></shadow><block type="math_op3" id="!n8j#hk;f;PSP`65r6T+"><value name="x"><block type="math_arithmetic" id="zpDboTiND]GfA!PH%sm/"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="f:Xr^mZ~PsuTSXW,f*mD"><field name="NUM">0</field></shadow><block type="device_heading" id="0TwR2Er6hl)KJwmb6#B_"></block></value><value name="B"><shadow type="math_number" id="!is]%ndu[olj39]BxVZj"><field name="NUM">0</field></shadow><block type="variables_get" id="dLzH)GSP{AuU6EH:Og|H"><field name="VAR" id="F*[|@9qictcBNW=8.J.6">targetHeading</field></block></value></block></value></block></value><next><block type="controls_if" id="Bb8l0UdiN/REE?r[j#@{"><mutation elseif="1"></mutation><comment pinned="false" h="80" w="160">Success Check (must be within +/- 20 degrees of target)</comment><value name="IF0"><shadow type="logic_boolean" id="tC!m:-sq(,.VKUmcP[w@"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="rR/rUmBt5Im,8U2xz0|-"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="X!bom/R[Q4dac4kM}8l+"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="FgFiR=.G`SQtWi8)yd*|"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="Pm/h?7YbC2MbL@fV`YR?"><field name="NUM">0</field></shadow><block type="variables_get" id="G0gVk%VJsm^DY$bfQZk)"><field name="VAR" id="pL`A)r$Qw)B?W[mxQK(m">steps</field></block></value><value name="B"><shadow type="math_number" id="{j#J;ZFe@$X7d]kaFz,Z"><field name="NUM">20</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="nO!k6q9zZnv(erY1J~8x"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="tUco*m,FJ%D8]{Rzst_T"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="z[GTUws#`Nd8ki[I[`?:"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="q@!e.H3]WN1BrvH(BuLY"><field name="OP">LTE</field><value name="A"><shadow type="math_number" id="HNX2/.7a/e)m2tqU6]Z#"><field name="NUM">0</field></shadow><block type="variables_get" id="tPsf,lH%!ACI[[|q/lAI"><field name="VAR" id="_#RiNQ|9]zq~%R8dodQX">headingDiff</field></block></value><value name="B"><shadow type="math_number" id="LYQf$v{Qd,:m4S-ox-!7"><field name="NUM">20</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="2#O})@R!ef:jV^MKA}Fh"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="ECCmlw:n%slB%GM,EU%t"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="!V*GsgKOhXSfZ,cg8}70"><field name="NUM">0</field></shadow><block type="variables_get" id="Im!N:E{R_OC]W6~M!,:^"><field name="VAR" id="_#RiNQ|9]zq~%R8dodQX">headingDiff</field></block></value><value name="B"><shadow type="math_number" id="D-i6t+y*etO9h|^W42ac"><field name="NUM">340</field></shadow></value></block></value></block></value></block></value><statement name="DO0"><block type="function_call" id="t6=#;t0iW`26]Rq%MLsF"><mutation name="gameSuccess" functionid="LwIl=ZRd!XCG!NF$JD#8"><arg name="pieces" id="otn6agdwt37pqta5gj5ba" type="number"></arg><arg name="points" id="i36sjr34geiuq7ykf55k" type="number"></arg></mutation><comment pinned="false" h="80" w="160">Award 1 piece, 1 point</comment><value name="otn6agdwt37pqta5gj5ba"><shadow type="math_number" id="tJoX6e-!*2WVBQ)JY%Q$"><field name="NUM">1</field></shadow></value><value name="i36sjr34geiuq7ykf55k"><shadow type="math_number" id="vXV0=0EP7.KTWDoSjHs#"><field name="NUM">1</field></shadow></value><next><block type="function_call" id="mH7H7FG~D0*)8P`b~pud"><mutation name="startRound2" functionid="0%Lj[|Xd1He~5E1.O*of"></mutation><data>{"commentRefs":[],"fieldData":{}}</data></block></next></block></statement><value name="IF1"><shadow type="logic_boolean" id="ey@}G?A$~!S}?:n{K5cK"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="_tXR?#`db(c~5WYqq?^U"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="3,55N,^xnUnpMSf!%3rx"><field name="NUM">0</field></shadow><block type="variables_get" id="AteXLUpCMSk-ePuom4J%"><field name="VAR" id="pL`A)r$Qw)B?W[mxQK(m">steps</field></block></value><value name="B"><shadow type="math_number" id="N%Q+`fmWeCueBIp#h^G*"><field name="NUM">20</field></shadow></value></block></value><statement name="DO1"><block type="device_print_message" id="i$n7M[HX`~/!hHB]E@_i"><comment pinned="false" h="80" w="160">Give new clue if they walked 20 steps but in the wrong direction</comment><value name="text"><block type="text_join" id="S53MndDO,=fpJi,y59QG"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="#Zdl`xPE7$UYrhA@WFP`"><field name="TEXT">Wrong Way! Find </field></shadow></value><value name="ADD1"><shadow type="text" id="eB=j+q([l7bHn}]F;D+="><field name="TEXT"></field></shadow><block type="function_call_output" id="|#9Bo#VzjlS@.lVF+rGV"><mutation name="convertHeading" functionid="rppXjTFx63yI7h7uS7RG"><arg name="heading" id="2ob1fkth6qv72sxu9yf9b" type="number"></arg></mutation><value name="2ob1fkth6qv72sxu9yf9b"><shadow type="math_number" id="6EauG;M5LQV0nm72;33q"><field name="NUM">1</field></shadow><block type="variables_get" id=";y6/5PHxkhlf,-qioVsv"><field name="VAR" id="F*[|@9qictcBNW=8.J.6">targetHeading</field></block></value></block></value></block></value><next><block type="variables_set" id="arYR(Rx]3bE?8rE4q/|L"><field name="VAR" id="pL`A)r$Qw)B?W[mxQK(m">steps</field><comment pinned="false" h="80" w="160">Reset steps</comment><value name="VALUE"><shadow type="math_number" id="P*v6S0S]bE38d%(_;Z4H"><field name="NUM">0</field></shadow></value></block></next></block></statement></block></next></block></next></block></statement></block><block type="function_definition" id="=NF8SCHTPvZqDHkLK{.a" x="0" y="814"><mutation name="startRound2" functionid="0%Lj[|Xd1He~5E1.O*of"></mutation><field name="function_name">startRound2</field><comment pinned="false" h="80" w="160">ROUND 2: LED Hot/Cold (Medium, 60s)</comment><statement name="STACK"><block type="variables_set" id="[GGy:x#fBnzq}2nu]+9`"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field><value name="VALUE"><shadow type="math_number" id="3_qxioNX]5Hl-uVJRL|B"><field name="NUM">2</field></shadow></value><next><block type="variables_set" id="LvIFw2ef.$Ji=_YapfOZ"><field name="VAR" id="`TaU[NNEV-MPq?Z^:shf">timeRemaining</field><comment pinned="false" h="80" w="160">60 seconds time limit</comment><value name="VALUE"><shadow type="math_number" id="x:tJwVR2PQ7(,PQn(BPL"><field name="NUM">60</field></shadow></value><next><block type="device_print_message" id="333HxJ/v{vC@XEU(4d.p"><data>{"commentRefs":[],"fieldData":{}}</data><value name="text"><shadow type="text" id="}?kZPZBzf?UF+N(.IU$0"><field name="TEXT">R2: 2 PIECES</field></shadow></value><next><block type="device_print_message" id="p:o/69CfH-4T7R39/:$R"><value name="text"><block type="text_join" id="c^8vGG!^2pNKx!s:FC5^"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="bGC-Hj%gaX}ai6t=sDH0"><field name="TEXT">HUNT: </field></shadow></value><value name="ADD1"><shadow type="text" id="=ISf%2uPK@hdG24@B930"><field name="TEXT"></field></shadow><block type="variables_get" id="{%lw;OX1g?2RKUJt]lBA"><field name="VAR" id="`TaU[NNEV-MPq?Z^:shf">timeRemaining</field></block></value><value name="ADD2"><shadow type="text" id="4TY]P]j?1NWf3vS59STW"><field name="TEXT">s</field></shadow></value></block></value><next><block type="variables_set" id="Z+ZNnk:{Yum{Df,QYmH3"><field name="VAR" id="F*[|@9qictcBNW=8.J.6">targetHeading</field><comment pinned="false" h="80" w="160">The 'treasure' is a specific roll (tilt) angle
Target tilt between flat and vertical</comment><value name="VALUE"><shadow type="math_number" id="J(3?)0R9gl6JZz`PwpOW"><field name="NUM">0</field></shadow><block type="device_random" id="$+40-*jb^vKitHFB50.B"><value name="min"><shadow type="math_number" id="#ux)rKB9X60_/6i^}}KR"><field name="NUM">-90</field></shadow></value><value name="limit"><shadow type="math_number" id="yIs:}W}]}/BI3E}2g%{y"><field name="NUM">90</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="-ge!s_X$jELmp_?CKkbH" x="629" y="814"><mutation name="handleRound2" functionid="g)?M;Y8Q)NNYJxF=q,~J"></mutation><field name="function_name">handleRound2</field><statement name="STACK"><block type="controls_if" id="wz[,#6(E4EQr`1xSo5fz"><mutation elseif="1"></mutation><comment pinned="false" h="80" w="160">Time check (executed every 500ms in the forever loop)</comment><value name="IF0"><shadow type="logic_boolean" id="I5m2Y[/cT}pN`)aE$KD$"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Hpg84G_=xVvtoay2OzP9"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="_2K$cN;m6IJBGu$igoD8"><field name="NUM">0</field></shadow><block type="variables_get" id="/8{R;xU[iEUM+4[}=`U@"><field name="VAR" id="`TaU[NNEV-MPq?Z^:shf">timeRemaining</field></block></value><value name="B"><shadow type="math_number" id="iZFbTQiq^hI1dxJw?e(i"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="controls_if" id="P0u6J[mw9b#H3BXwFvQw"><comment pinned="false" h="80" w="160">Only run this check every 1000ms (1 second)</comment><value name="IF0"><shadow type="logic_boolean" id="D:;+v_z`#OO6O%n`63FQ"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="%nk)$NfYN.Zgl|!ka)+_"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="YRE#ce,(jN97gW4x3=#D"><field name="NUM">0</field></shadow><block type="math_modulo" id="|by5gn|X?u^ho}!9.v%n"><value name="DIVIDEND"><shadow type="math_number" id="#xmPdUIn=w-gJ=`aDON`"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="I|Z!I8hkXS4V#E7v,yx^"></block></value><value name="DIVISOR"><shadow type="math_number" id="rF9q%(h%T-,pG$nJT(P`"><field name="NUM">1000</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="}?AgMJ4`zGi9K4$Qv,oJ"><field name="NUM">500</field></shadow></value></block></value><statement name="DO0"><block type="variables_change" id="P`Ca/]=HOY2wcX0Zv9~s"><field name="VAR" id="`TaU[NNEV-MPq?Z^:shf">timeRemaining</field><value name="VALUE"><shadow type="math_number" id="8R;+8IiL0l+,NPo[Z[,D"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="?;7KT@w-u/f_mpJjuTf?"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="b*r[tO]x~y*defS!25E+"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="YV{g~LeBt@=I?is+xWp}"><field name="NUM">1</field></shadow></value></block></value></block></statement></block></statement><value name="IF1"><shadow type="logic_boolean" id="DB;p8!yo-6#*04u1h!!_"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="y+/h|o[,u*S79YH6yDAV"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="?,db:Ea]wtXHfG,I5z/!"><field name="NUM">0</field></shadow><block type="variables_get" id="v_O!QB.+~$)I6c-Me~Z_"><field name="VAR" id="`TaU[NNEV-MPq?Z^:shf">timeRemaining</field></block></value><value name="B"><shadow type="math_number" id="PdzTGeNxTpVP^bKUT%v("><field name="NUM">0</field></shadow></value></block></value><statement name="DO1"><block type="function_call" id="CUX3e6YU-v%+U5^.(}u_"><mutation name="gameFail" functionid="Q6/7-(baxpR}+35xqTuR"></mutation><next><block type="function_return" id="6:TTYbd_]LY,r4-0@]Bb"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="true"></mutation><comment pinned="false" h="80" w="160">Stop the logic if time is up</comment></block></next></block></statement><next><block type="variables_set" id="obz(@07[WD{%$[5a.{GS"><field name="VAR" id="e@b|{`]RHUfdB67$w?dn">currentRoll</field><comment pinned="false" h="80" w="160">Distance to target tilt (Absolute difference from target Roll)</comment><value name="VALUE"><shadow type="math_number" id="Bd@GEBS/%M=B1lJZ[#}o"><field name="NUM">0</field></shadow><block type="device_get_rotation" id="7g6=Dy:/;5g@rqSco^@X"><field name="NAME">Rotation.Roll</field></block></value><next><block type="variables_set" id="(CPazE^TLK0|sRtwT]-k"><field name="VAR" id="rR/HeP#($tm#{08dq(1u">distance</field><value name="VALUE"><shadow type="math_number" id="vTd1PH+4f+nU2H*UA7;%"><field name="NUM">0</field></shadow><block type="math_op3" id="HAyC(/oh;:#N_(MRr#eC"><value name="x"><block type="math_arithmetic" id="#|edOQTJ(TX9{CN$SoZ1"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="Vj4EYu]q[++unnOWekr="><field name="NUM">0</field></shadow><block type="variables_get" id="iJYG^XPV1o;E03b`n=0s"><field name="VAR" id="e@b|{`]RHUfdB67$w?dn">currentRoll</field></block></value><value name="B"><shadow type="math_number" id="axx$S/N$+{do~L0)Ne}!"><field name="NUM">0</field></shadow><block type="variables_get" id=")p|!qlU^zh`8[?Yuhzzj"><field name="VAR" id="F*[|@9qictcBNW=8.J.6">targetHeading</field></block></value></block></value></block></value><next><block type="variables_set" id="PR!Fh[d96p*2T}5N%R7C"><field name="VAR" id="HA$fG@z],8(`WwhB/3J^">brightness</field><comment pinned="false" h="80" w="160">LED Brightness Feedback:
Closer (smaller distance) = Brighter LED (0-9)</comment><value name="VALUE"><shadow type="math_number" id="LwO3){9}nk.oB:?rm=WB"><field name="NUM">0</field></shadow><block type="math_map" id="4R`%U~G7S9ItjmpzDxsU"><value name="value"><block type="variables_get" id="wV,7MU#cVDce=xneX1az"><field name="VAR" id="rR/HeP#($tm#{08dq(1u">distance</field></block></value><value name="fromLow"><shadow type="math_number" id="^~_!FH=A(z_XaBd@JuD}"><field name="NUM">0</field></shadow></value><value name="fromHigh"><shadow type="math_number" id="N6|_P/[uKUa]h}@0w#]2"><field name="NUM">90</field></shadow></value><value name="toLow"><shadow type="math_number" id="^.ypPMF$:7myDamA;p2@"><field name="NUM">9</field></shadow></value><value name="toHigh"><shadow type="math_number" id="o3L(Q#/8FOntN%Cy~RoZ"><field name="NUM">0</field></shadow></value></block></value><next><block type="variables_set" id="@?;HDJwyJU0Zi^Bm(Rxt"><field name="VAR" id="HA$fG@z],8(`WwhB/3J^">brightness</field><comment pinned="false" h="80" w="160">Clamp brightness between 0 and 9</comment><value name="VALUE"><shadow type="math_number" id="{=FFRI)_HCo=_E{,W4u6"><field name="NUM">0</field></shadow><block type="math_op2" id="(|,?cM/]v9,{O7.e4tuz"><field name="op">min</field><value name="x"><shadow type="math_number" id="{-JO6t?XfC-:!P1#;WTu"><field name="NUM">9</field></shadow></value><value name="y"><block type="math_op2" id="[.Z[M`bpTD.|e3MAK9;?"><field name="op">max</field><value name="x"><shadow type="math_number" id="!#xxJ?:MPCD[Hi{R8j2q"><field name="NUM">0</field></shadow></value><value name="y"><block type="variables_get" id="8g//atpFX~QTAw7m={QG"><field name="VAR" id="HA$fG@z],8(`WwhB/3J^">brightness</field></block></value></block></value></block></value><next><block type="device_plot_brightness" id="Mn~^[dj?Ec1~iY2~JE5("><comment pinned="false" h="80" w="160">Show a single pixel that gets brighter as they get closer
Multiply by 25 to get 0-255 range</comment><value name="x"><shadow type="math_number_minmax" id="=5K4i#BtD/M/maG=~9oU"><mutation min="0" max="4" precision="0"></mutation><field name="SLIDER">2</field></shadow></value><value name="y"><shadow type="math_number_minmax" id="Z0XYI[U`#.ni(,~L,1mC"><mutation min="0" max="4" precision="0"></mutation><field name="SLIDER">2</field></shadow></value><value name="brightness"><shadow type="math_number_minmax" id="vW*VS[~T4$S/U`maWN=3"><mutation min="0" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_arithmetic" id="~JyXnjY6?rV.ifnEhLVH"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="Ig}AcK-WQ9P!`zx#t]o1"><field name="NUM">0</field></shadow><block type="variables_get" id="Nc@PxD~,F7fOTgcPu]3{"><field name="VAR" id="HA$fG@z],8(`WwhB/3J^">brightness</field></block></value><value name="B"><shadow type="math_number" id="J7xfNZ%[I=?]Qu(bk*OB"><field name="NUM">25</field></shadow></value></block></value><next><block type="controls_if" id="9F_DG!?WDj$jq3m`!Q4#"><comment pinned="false" h="80" w="160">Success Condition: Very close to the target tilt</comment><value name="IF0"><shadow type="logic_boolean" id="4%nSaPB.}^|a-.^72J//"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="?f2ZP02nP5[:I0;7mD,z"><field name="OP">LTE</field><value name="A"><shadow type="math_number" id="ZMoV[,ey:zp-)+*ZsQ0H"><field name="NUM">0</field></shadow><block type="variables_get" id="nWsI`kU(nx=MnqdaKw6T"><field name="VAR" id="rR/HeP#($tm#{08dq(1u">distance</field></block></value><value name="B"><shadow type="math_number" id="_`6052pEfP+C1M+dU2};"><field name="NUM">5</field></shadow></value></block></value><statement name="DO0"><block type="function_call" id="vL,Y;ebii)]4gUJ$E{8Z"><mutation name="gameSuccess" functionid="LwIl=ZRd!XCG!NF$JD#8"><arg name="pieces" id="otn6agdwt37pqta5gj5ba" type="number"></arg><arg name="points" id="i36sjr34geiuq7ykf55k" type="number"></arg></mutation><comment pinned="false" h="80" w="160">Award 2 pieces, 2 points</comment><value name="otn6agdwt37pqta5gj5ba"><shadow type="math_number" id="Oi9u1c7a8qv1^4)cc2lt"><field name="NUM">2</field></shadow></value><value name="i36sjr34geiuq7ykf55k"><shadow type="math_number" id="aZtg2PEHlO#0-/*SmN9{"><field name="NUM">2</field></shadow></value><next><block type="function_call" id="1OFLqxaV_B9!w6@(.kJ?"><mutation name="startRound3" functionid="-B._py}O3ra]0|iXSCuR"></mutation><data>{"commentRefs":[],"fieldData":{}}</data></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="~,W.)]+[!?[3KR6)dpPp" x="1507" y="814"><mutation name="startRound3" functionid="-B._py}O3ra]0|iXSCuR"></mutation><field name="function_name">startRound3</field><comment pinned="false" h="80" w="160">ROUND 3: Tone Metal Detector (Hard, 90s)</comment><statement name="STACK"><block type="variables_set" id="eyV#M++pjT6oHKgdMi)a"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field><value name="VALUE"><shadow type="math_number" id="={iLw3W0MgBZQg[_ns$U"><field name="NUM">3</field></shadow></value><next><block type="variables_set" id="IkKkl-TNV7jt!-HbBux`"><field name="VAR" id="`TaU[NNEV-MPq?Z^:shf">timeRemaining</field><comment pinned="false" h="80" w="160">90 seconds time limit</comment><value name="VALUE"><shadow type="math_number" id="sIPBR*TCHo6CZF$z(SEM"><field name="NUM">90</field></shadow></value><next><block type="device_print_message" id="rY9H`72}ZEZ8q3Qx+?;;"><data>{"commentRefs":[],"fieldData":{}}</data><value name="text"><shadow type="text" id="GwY4sc[/+SgdYk@(Yso7"><field name="TEXT">R3: 3 PIECES</field></shadow></value><next><block type="device_print_message" id="bY]*xAF:l4~O$_:Qw;ys"><value name="text"><block type="text_join" id="Yd6^^9WAbI.t}5WJ$kj-"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id=".2,x./s,ZKGQ;Vk)=nNq"><field name="TEXT">HUNT: </field></shadow></value><value name="ADD1"><shadow type="text" id="rW5cYM@Zpg|I-+Syufmt"><field name="TEXT"></field></shadow><block type="variables_get" id="|Vs;BEvrYX]*w3DN6-5b"><field name="VAR" id="`TaU[NNEV-MPq?Z^:shf">timeRemaining</field></block></value><value name="ADD2"><shadow type="text" id="l1.:U-pK)h^8V%s7PXiG"><field name="TEXT">s</field></shadow></value></block></value><next><block type="variables_set" id="qcI%hF3)^OcFLGdFv%9Q"><field name="VAR" id="F*[|@9qictcBNW=8.J.6">targetHeading</field><comment pinned="false" h="80" w="160">The 'treasure' is a specific compass heading</comment><value name="VALUE"><shadow type="math_number" id="Mz=w-+1?F2U!DyR)yKfQ"><field name="NUM">0</field></shadow><block type="device_random" id="pNkWl0Yk7Bqylh7.]Ru$"><value name="min"><shadow type="math_number" id="-zROh*i?B)yBHd{+kMS("><field name="NUM">0</field></shadow></value><value name="limit"><shadow type="math_number" id="+oZi5D7L0qZ0uWW8)3HP"><field name="NUM">359</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="v;pIbop|uvm9*2YppT6~" x="2136" y="814"><mutation name="handleRound3" functionid="?zw/I0D6Y2R^~KJY*u%Z"></mutation><field name="function_name">handleRound3</field><statement name="STACK"><block type="controls_if" id="`t|v(90*_?QC37dcjeu7"><mutation elseif="1"></mutation><comment pinned="false" h="80" w="160">Time check</comment><value name="IF0"><shadow type="logic_boolean" id="PP`D#j56fb:HWqrO7E+K"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="|-.{k*as.4)6[e}[o~zU"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="|qgz[b:5n-jg[+pOgTrM"><field name="NUM">0</field></shadow><block type="variables_get" id="6z|Up;uF5xMXE|HsZU4z"><field name="VAR" id="`TaU[NNEV-MPq?Z^:shf">timeRemaining</field></block></value><value name="B"><shadow type="math_number" id="]*8NCk8ym}ti9y[nrOh;"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="controls_if" id="9AgN2{%gz!9Ft*,$VSC("><comment pinned="false" h="80" w="160">Only run this check every 1000ms (1 second)</comment><value name="IF0"><shadow type="logic_boolean" id="~$@TzB`(V7;n8mK~*yRb"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="azX0L0v^oMDbEu?K?{l."><field name="OP">LT</field><value name="A"><shadow type="math_number" id="J=I+L3/!MBCN:/BXLi$Y"><field name="NUM">0</field></shadow><block type="math_modulo" id=";X2qqwD2z:m{JuP+P=Fy"><value name="DIVIDEND"><shadow type="math_number" id=",uqx#x`nSg4fP_81ewG~"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="%^F|j2k+QPmY9w#1X)Xq"></block></value><value name="DIVISOR"><shadow type="math_number" id="NEGLhW]kcVAJ9u[S:*EW"><field name="NUM">1000</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="IF%aMggG4^;yqe[KxlL)"><field name="NUM">500</field></shadow></value></block></value><statement name="DO0"><block type="variables_change" id="$khkLF^2#oZ5AXTpUeAT"><field name="VAR" id="`TaU[NNEV-MPq?Z^:shf">timeRemaining</field><value name="VALUE"><shadow type="math_number" id=":gEbS-|PS6mr+?AB{Y03"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="e{;__R{cEQfxOJ)3*i0/"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="Zk/2=5s[EaxcR5?;CDA:"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="@wNQzT/y5,7zUPeO57y`"><field name="NUM">1</field></shadow></value></block></value></block></statement></block></statement><value name="IF1"><shadow type="logic_boolean" id="+DL)!{DRgm`F0/$8.hW7"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="E?X-Eit2O,th8SSH|`X%"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="^v#sqR}C/rCVQc7kAacu"><field name="NUM">0</field></shadow><block type="variables_get" id="pj~~hslY,V^(p$7fu4RH"><field name="VAR" id="`TaU[NNEV-MPq?Z^:shf">timeRemaining</field></block></value><value name="B"><shadow type="math_number" id="~gtb]66U%TQm^}qOf#p~"><field name="NUM">0</field></shadow></value></block></value><statement name="DO1"><block type="function_call" id="[:r`$Xmbl2:THh8FFjXi"><mutation name="gameFail" functionid="Q6/7-(baxpR}+35xqTuR"></mutation><next><block type="function_return" id="ffhz;9%(~iG55VZ1MwJo"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="true"></mutation></block></next></block></statement><next><block type="variables_set" id="}1v4PD$-+jl}~5~2`3UI"><field name="VAR" id="qRMnIIMyL||}@J6X%5TN">headingDiff2</field><comment pinned="false" h="80" w="160">Distance to target heading</comment><value name="VALUE"><shadow type="math_number" id="L|S%}F,sq;yjZXsK?hkQ"><field name="NUM">0</field></shadow><block type="math_op3" id="qGAPeS;(Rp|5ddCg~FvP"><value name="x"><block type="math_arithmetic" id="$IstQDUeXreGZ;aH:Zl8"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="*1tH!nFt6d/_HyL:Gk4M"><field name="NUM">0</field></shadow><block type="device_heading" id="zs#C`X3_Ft%:,f`0Op()"></block></value><value name="B"><shadow type="math_number" id="cd@EkI=objk$]cTDV_`G"><field name="NUM">0</field></shadow><block type="variables_get" id="N!7=!_[|!jF~fi)FNJ(:"><field name="VAR" id="F*[|@9qictcBNW=8.J.6">targetHeading</field></block></value></block></value></block></value><next><block type="controls_if" id="/fZkR8KZ2J-15yHr~+mm"><comment pinned="false" h="80" w="160">Handle wrap-around (e.g., 350 to 10 degrees is 20, not 340)</comment><value name="IF0"><shadow type="logic_boolean" id="gOY`@2Z(uHa5Z5fhx(zj"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="aW}{%JV}T1$,eHS~=_~1"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="{{hMd9h3l!IF^5*edDz~"><field name="NUM">0</field></shadow><block type="variables_get" id="X^m8MaF7_8hZqJow1}Nc"><field name="VAR" id="qRMnIIMyL||}@J6X%5TN">headingDiff2</field></block></value><value name="B"><shadow type="math_number" id="3@1POQ}sc09HUtjYSFtJ"><field name="NUM">180</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="jkH!!igc`*9a~|[REAMH"><field name="VAR" id="qRMnIIMyL||}@J6X%5TN">headingDiff2</field><value name="VALUE"><shadow type="math_number" id="NUO/Iz8U]rmk%G80G)zY"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="!mm=,-J=+VW!:n*vY@Am"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="/YsYNgo[g2e/nG`.gB+o"><field name="NUM">360</field></shadow></value><value name="B"><shadow type="math_number" id="te4ic.}.E/$F{nhCc=-?"><field name="NUM">0</field></shadow><block type="variables_get" id="*JykIg`nhWn2}=$1o!BR"><field name="VAR" id="qRMnIIMyL||}@J6X%5TN">headingDiff2</field></block></value></block></value></block></statement><next><block type="variables_set" id="4_t#F,LKUCo%B$$#p!89"><field name="VAR" id="k_f)n[c|8+L/!Q]Mak{k">maxFreq</field><comment pinned="false" h="80" w="160">Tone Feedback:
Closer (smaller distance) = Higher Pitch/Frequency
High pitch</comment><value name="VALUE"><shadow type="math_number" id="tc0o)L1)NL1Pj#=.@M*X"><field name="NUM">1000</field></shadow></value><next><block type="variables_set" id="`6.o?u1C]kA=jdP^_?#M"><field name="VAR" id="bNN~A@HmShtW+P952R=#">minFreq</field><comment pinned="false" h="80" w="160">Low pitch</comment><value name="VALUE"><shadow type="math_number" id="_AwS?R:mo$aCp;Q|#Vq#"><field name="NUM">100</field></shadow></value><next><block type="variables_set" id="akg:7If2%X*/7!#.BY$}"><field name="VAR" id="jU?nJ=vGY+#/vZQl:;F$">frequency</field><comment pinned="false" h="80" w="160">Map distance (0 to 180) to frequency (maxFreq to minFreq)</comment><value name="VALUE"><shadow type="math_number" id="9/[7uSay(NW,5KW[^Ptx"><field name="NUM">0</field></shadow><block type="math_map" id="4ag8R2wq3kDAH%*e!%C~"><value name="value"><block type="variables_get" id="d*vxV0D2n{zS^x+~uSW$"><field name="VAR" id="qRMnIIMyL||}@J6X%5TN">headingDiff2</field></block></value><value name="fromLow"><shadow type="math_number" id="l.S:2q:;1^yB,C_f|C:{"><field name="NUM">0</field></shadow></value><value name="fromHigh"><shadow type="math_number" id="d-TX7eUFpU##Y#o657F,"><field name="NUM">180</field></shadow></value><value name="toLow"><block type="variables_get" id="[.8Dt!4v4##kGz]F{~B4"><field name="VAR" id="k_f)n[c|8+L/!Q]Mak{k">maxFreq</field></block></value><value name="toHigh"><block type="variables_get" id="+en9*Mb2D:oL@+.e05*4"><field name="VAR" id="bNN~A@HmShtW+P952R=#">minFreq</field></block></value></block></value><next><block type="device_ring" id="]Vfu*4?sIMxRl`Bmth}H"><comment pinned="false" h="80" w="160">Play the tone in the background</comment><value name="note"><shadow type="device_note" id="7;Ih=i{[{*[Zsn%~i)TD"><field name="name">262</field></shadow><block type="variables_get" id="K?juEFq$Ts_ZMB6G/$[n"><field name="VAR" id="jU?nJ=vGY+#/vZQl:;F$">frequency</field></block></value><next><block type="basic_show_icon" id="JXui..oIdGb_^o6P*?eL"><field name="i">IconNames.Target</field><comment pinned="false" h="80" w="160">Show a hint icon on the screen</comment><next><block type="controls_if" id="ZyXa?pKNC,Uv4@3i+Ce-"><comment pinned="false" h="80" w="160">Success Condition: Very close to the target heading</comment><value name="IF0"><shadow type="logic_boolean" id="/=^mAHqj)bLTF{#fuQAN"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=":frdR]u1J.ot}}IJgG+#"><field name="OP">LTE</field><value name="A"><shadow type="math_number" id="l!e$pk/|TJ`;|JWlNIc}"><field name="NUM">0</field></shadow><block type="variables_get" id="$;?E~fXA:opZ2h:2t;(Y"><field name="VAR" id="qRMnIIMyL||}@J6X%5TN">headingDiff2</field></block></value><value name="B"><shadow type="math_number" id="pfDG`KSrwcL[I?D!W+FJ"><field name="NUM">10</field></shadow></value></block></value><statement name="DO0"><block type="device_rest" id="#oj+}Z$L$Ygr?U2~BL5T"><comment pinned="false" h="80" w="160">Stop the tone</comment><value name="duration"><shadow type="device_beat" id="(d16ZMv3jm9x+{assskn"><field name="fraction">BeatFraction.Whole</field></shadow><block type="math_number" id="EnJ9#5|aa`jqR[HGsrof"><field name="NUM">100</field></block></value><next><block type="function_call" id="xDO].w}9nN-Nh|HHa0!_"><mutation name="gameSuccess" functionid="LwIl=ZRd!XCG!NF$JD#8"><arg name="pieces" id="otn6agdwt37pqta5gj5ba" type="number"></arg><arg name="points" id="i36sjr34geiuq7ykf55k" type="number"></arg></mutation><comment pinned="false" h="80" w="160">Award 3 pieces, 3 points</comment><value name="otn6agdwt37pqta5gj5ba"><shadow type="math_number" id="d-ldLaBHsoE*BWEI^,$A"><field name="NUM">3</field></shadow></value><value name="i36sjr34geiuq7ykf55k"><shadow type="math_number" id="EQnB7Dj1M_mYc:kfG0#U"><field name="NUM">3</field></shadow></value><next><block type="function_call" id="/4m^%{}9nfSPcJTD.IQF"><mutation name="gameWin" functionid="9,iA|rD3vhVRb.Vuj@o|"></mutation><data>{"commentRefs":[],"fieldData":{}}</data></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="S~$_9XPV-~tr6R[]F.C7" x="3181" y="814"><mutation name="convertHeading" functionid="rppXjTFx63yI7h7uS7RG"><arg name="heading" id="2ob1fkth6qv72sxu9yf9b" type="number"></arg></mutation><field name="function_name">convertHeading</field><comment pinned="false" h="80" w="160">--- 4. Utility and Feedback Functions ---
Convert heading number to a cardinal direction string</comment><value name="2ob1fkth6qv72sxu9yf9b"><block type="argument_reporter_number" id="]n0x9O;15o1s,T-bf~EB" deletable="false"><field name="VALUE">heading</field></block></value><statement name="STACK"><block type="controls_if" id="[{`H92CBJK_TejqD0y-R"><mutation elseif="2" else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="d4_M(,1G1?my.VIGC{?C"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id=")r0h9-+P,aY|_:TPT)-G"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="Ud=^RNmo6L51#([S@QQe"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="G@=LY-TVeE^QZx6i(l7}"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="}|vNz(D]Cj-E}S6)V-RH"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="heRrBX9|3yilZ=F81CFI"><field name="VALUE">heading</field></block></value><value name="B"><shadow type="math_number" id="z_PoC(q^PEadyp=vHy3K"><field name="NUM">315</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="LNWD%l9QPXq%nmomKi.["><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="pI=|zGdJ^_I/:x-yHzER"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="rt~1xP@V48M?S$e5N!Nh"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="!2Ins7Ef;;^mB=++CJu["><field name="VALUE">heading</field></block></value><value name="B"><shadow type="math_number" id="nQZ);b9[swD3/Hw$+p?C"><field name="NUM">45</field></shadow></value></block></value></block></value><statement name="DO0"><block type="function_return" id="wA4i*qhU2{c/uV)ZG]HB"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="w*iTa4oX|t23bfeEC$45"><field name="NUM">0</field></shadow><block type="text" id="GW6fvYs!+enK3~n?Fik9"><field name="TEXT">NORTH</field></block></value></block></statement><value name="IF1"><shadow type="logic_boolean" id="aO7)6GzC8YlTe:ix9TOo"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="@z]QB1TCx?Zc!.`?@mf%"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="{nj}}=_l4MF_XdX#e]ry"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="@IZ?sh)ykZ;%L0JM/Ddp"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="Ihc9Tq;_%%zw#]T[uOX{"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="^{/6Z+g7PZreXX]4u`!y"><field name="VALUE">heading</field></block></value><value name="B"><shadow type="math_number" id="YNZa?MRmQPec#y+x6pDn"><field name="NUM">45</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="7_+GwC,JWe=o4AhD@?m7"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Eo?N4c+hnts:V/#VgW$v"><field name="OP">LT</field><value name="A"><shadow type="math_number" id=")1R31uQ0(#+JG~=2qS*-"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="CZ8cIO)b!bMerX82=2Jj"><field name="VALUE">heading</field></block></value><value name="B"><shadow type="math_number" id="qf2Rhx8Ytr^BDKAqX!z6"><field name="NUM">135</field></shadow></value></block></value></block></value><statement name="DO1"><block type="function_return" id="5}xRNzjD+{Y_^`Uc{/}="><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="D^M9p%Yr.:b:~(=K*5YB"><field name="NUM">0</field></shadow><block type="text" id="zTJ[b@RTHwAAFFTb22j_"><field name="TEXT">EAST</field></block></value></block></statement><value name="IF2"><shadow type="logic_boolean" id="3G3=V1MUvKGjtD(HaCN-"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="/)rs,P,(1,W55!WImApN"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="dQi=tja^|OZ?N1v(tAP;"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="ynSvkOe^p$G%FJRyp1.T"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="t@=^FdHnNUFxi,1,DLU_"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="09kkGYp3ns?[u-{x?LM."><field name="VALUE">heading</field></block></value><value name="B"><shadow type="math_number" id="h?2hh`xkX;MBnh;}URt}"><field name="NUM">135</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="@II.t,B]Pl,jcPkO9M|c"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="=QTkyJHud(XqfkDHnL!`"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="MZg(o5g#t8ok*]/C`%D."><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="K/@dyo5_S3Q`pj8=52gv"><field name="VALUE">heading</field></block></value><value name="B"><shadow type="math_number" id="yu5?9kvl~#?yBTME)!Bf"><field name="NUM">225</field></shadow></value></block></value></block></value><statement name="DO2"><block type="function_return" id="ke2nc;(Ot7$j(8OivmQ@"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="d[E0`;8qS?{:Xlt^63@V"><field name="NUM">0</field></shadow><block type="text" id="K.d%zO=VEp%X27ePcw5T"><field name="TEXT">SOUTH</field></block></value></block></statement><statement name="ELSE"><block type="function_return" id="?/KDTn0LNBil6Gokjd@w"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="=gcE/5G_;s4%{ub,j$X6"><field name="NUM">0</field></shadow><block type="text" id="WQ%0$i`8_e0+^bdf(cc8"><field name="TEXT">WEST</field></block></value></block></statement></block></statement></block><block type="function_definition" id="]hMTJQ}2g-LYfoDq+lZE" x="3986" y="814"><mutation name="gameSuccess" functionid="LwIl=ZRd!XCG!NF$JD#8"><arg name="pieces" id="otn6agdwt37pqta5gj5ba" type="number"></arg><arg name="points" id="i36sjr34geiuq7ykf55k" type="number"></arg></mutation><field name="function_name">gameSuccess</field><value name="otn6agdwt37pqta5gj5ba"><block type="argument_reporter_number" id="xtjt(DQ]@*8wTOas$~QG" deletable="false"><field name="VALUE">pieces</field></block></value><value name="i36sjr34geiuq7ykf55k"><block type="argument_reporter_number" id="TkhsvJ;v0X+L`%~Ip_0J" deletable="false"><field name="VALUE">points</field></block></value><statement name="STACK"><block type="variables_change" id="l2GDQJNrQy|i|8+7m61h"><field name="VAR" id=".qnK9!Hy?boJvCcY`ADQ">piecesFound</field><value name="VALUE"><shadow type="math_number" id="W5W/s^Lwf826u[lUx)7s"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="bLTt(710~gY5TrBXmM`;"><field name="VALUE">pieces</field></block></value><next><block type="variables_change" id="+:2Ju|5,GM{yS?fi)VY^"><field name="VAR" id="fMCO*r,aQyav[44x(*jo">gameScore</field><value name="VALUE"><shadow type="math_number" id="JWm_c-QF#cCgboVh8f(q"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="1kFJ|oTLSa*|IXir^+$,"><field name="VALUE">points</field></block></value><next><block type="device_show_leds" id="oy{45GG7!2FT|@)JF4CM"><field name="LEDS">`
        . # # . . 
        # . . # . 
        # # # # # 
        . # # # . 
        . . # . .
        `</field><comment pinned="false" h="80" w="160">Visual: Ocarina piece icon</comment><next><block type="controls_if" id="2fSrhNYB:K].46F-y4YY"><mutation elseif="2"></mutation><comment pinned="false" h="80" w="160">Sound (Different for each level)</comment><value name="IF0"><shadow type="logic_boolean" id="1G,P(?gP??D3KKvX-6k!"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Jz=Kv5|fI%%#C?qusW$n"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="j2)RCB0nK=l_EnTmC2Cj"><field name="NUM">0</field></shadow><block type="variables_get" id="^9hd3FDO2?ld,k7RPQjZ"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field></block></value><value name="B"><shadow type="math_number" id="uuT]?.LT5L4cWhrTJBmg"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="playMelody" id="P48@-A~M9cm:FhEJI]]["><value name="melody"><shadow type="melody_editor" id="aa1Ifn1R=d4`mJa~|jE|"><field name="melody">"C5 B A G F E D C "</field></shadow></value><value name="tempo"><shadow type="math_number_minmax" id="L*Q;IhL*9Ia6XjuPY!Jn"><mutation min="40" max="500" precision="0"></mutation><field name="SLIDER">200</field></shadow></value></block></statement><value name="IF1"><shadow type="logic_boolean" id="6(Zsv3V1xZm!$8+.?QQ}"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="x3K%M}rw!W1(O,kDI+Cz"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="y}iq.fK/s|4lkD_`|^;3"><field name="NUM">0</field></shadow><block type="variables_get" id="yPVy@0U/5zc_n1TmAo;k"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field></block></value><value name="B"><shadow type="math_number" id="MKw9PJIWhFyJ@X}BJM2k"><field name="NUM">2</field></shadow></value></block></value><statement name="DO1"><block type="playMelody" id="Et_2HD}Q.i^XE8`~G=Zb"><value name="melody"><shadow type="melody_editor" id="21-P=%3r)6YU|9^K3z{M"><field name="melody">"G B A G C5 B A B "</field></shadow></value><value name="tempo"><shadow type="math_number_minmax" id="b=!(zsyViw*Yk3;7T(4I"><mutation min="40" max="500" precision="0"></mutation><field name="SLIDER">200</field></shadow></value></block></statement><value name="IF2"><shadow type="logic_boolean" id="d`o-q#;][N^FGXn}psa("><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="[u@b)2d(M|!@p5d5#3s`"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="K}q_3U$dz{|#Yeu;$@Zw"><field name="NUM">0</field></shadow><block type="variables_get" id="QsmzASnMk{C=f^Pk~zjO"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field></block></value><value name="B"><shadow type="math_number" id="1,:IP*FCNynXC|i][v!s"><field name="NUM">3</field></shadow></value></block></value><statement name="DO2"><block type="playMelody" id="Uyxk=-;x*/Oruw#CeTw."><value name="melody"><shadow type="melody_editor" id="QBvra,zdQoSlBq/X%*)1"><field name="melody">"C D E F G A B C5 "</field></shadow></value><value name="tempo"><shadow type="math_number_minmax" id="u=1#8ozICAR]K(a1NOAh"><mutation min="40" max="500" precision="0"></mutation><field name="SLIDER">150</field></shadow></value></block></statement><next><block type="device_print_message" id="U(?Gra+?_$Yc{eZ%ybd@"><value name="text"><block type="text_join" id="4eDYzUP6tp8/:wgsrvJY"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="FDd|P+.iROCw96ZiYtBw"><field name="TEXT">FOUND </field></shadow></value><value name="ADD1"><shadow type="text" id="7H3Cf;mIOYJl|0[zH8sa"><field name="TEXT"></field></shadow><block type="argument_reporter_number" id="Y+M(-z[;jvt|RxXh$[NI"><field name="VALUE">pieces</field></block></value><value name="ADD2"><shadow type="text" id="r^}]XOB84KI2o14oYNQ`"><field name="TEXT"> PIECES!</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="Ssq~.}XS6nx}HDJ;qZxI" x="0" y="2041"><mutation name="gameFail" functionid="Q6/7-(baxpR}+35xqTuR"></mutation><field name="function_name">gameFail</field><statement name="STACK"><block type="device_rest" id="/rhI~t}yH6o|b(.R+Qi}"><comment pinned="false" h="80" w="160">Stop the music just in case Round 3 was active</comment><value name="duration"><shadow type="device_beat" id="+J_Buoc)MC_]DU*[N7pJ"><field name="fraction">BeatFraction.Whole</field></shadow><block type="math_number" id="VQ:HiXQeAG8u29u{g2Ok"><field name="NUM">100</field></block></value><next><block type="variables_set" id="-(mqabx28S|Uzpe6y,/S"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field><value name="VALUE"><shadow type="math_number" id="y}E]`^fH1pF,FUMB.4uT"><field name="NUM">5</field></shadow></value><next><block type="basic_show_icon" id="{{W!*K~IZEz$PBMAv@K+"><field name="i">IconNames.No</field><comment pinned="false" h="80" w="160">Visual</comment><next><block type="device_print_message" id="G4tVq)=yRAjQe[Bx?(^y"><comment pinned="false" h="80" w="160">Message</comment><value name="text"><shadow type="text" id="C|MldRzbU5k1S9|||kK["><field name="TEXT">TRY AGAIN?</field></shadow></value><next><block type="playMelody" id=")d6r/bmVF6m{4)T*TfXj"><comment pinned="false" h="80" w="160">Sound
Annoying sound</comment><value name="melody"><shadow type="melody_editor" id="6U=sZP0B`JEP4%~ZEJ6l"><field name="melody">"C C C C C C C C "</field></shadow></value><value name="tempo"><shadow type="math_number_minmax" id="3zotXz;k$hR.X32|9N]z"><mutation min="40" max="500" precision="0"></mutation><field name="SLIDER">50</field></shadow></value><next><block type="device_pause" id="~/m7o!O]O7Xp=h=-5Bms"><data>{"commentRefs":[],"fieldData":{}}</data><value name="pause"><shadow type="timePicker" id=".gCANLy8[0$@B=U0Xtc3"><field name="ms">2000</field></shadow></value><next><block type="device_print_message" id="dkjNo?}NB1@$H4cGo/f%"><value name="text"><shadow type="text" id="UU1*G2Ok.fK`=UM[y{,j"><field name="TEXT">A+B TO RESET</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="l[co+yB{v#QNFN[?p5NA" x="527" y="2041"><mutation name="gameWin" functionid="9,iA|rD3vhVRb.Vuj@o|"></mutation><field name="function_name">gameWin</field><statement name="STACK"><block type="variables_set" id="ahuaY*`De!`/}JKX1W`I"><field name="VAR" id="PEKbeWd@=L9l;_y[e;S8">gameState</field><value name="VALUE"><shadow type="math_number" id="c:9?H#9GaM0LP%y@c[Y9"><field name="NUM">4</field></shadow></value><next><block type="device_print_message" id="1.CClK~KK~5pR|H,HYmN"><value name="text"><shadow type="text" id="r~-LV`;o[ft_$M[ts1]G"><field name="TEXT">YOU FOUND THE OCARINA OF PATH!</field></shadow></value><next><block type="device_show_leds" id=";zKrB01Q0=5#Z*#o@/Da"><field name="LEDS">`
        . # # # . 
        # # # # # 
        # . # . # 
        # # # # # 
        . # # # .
        `</field><comment pinned="false" h="80" w="160">Visual: Full Ocarina/Treasure</comment><next><block type="device_print_message" id="NaAH!}M[|Yjz#o1k6h]A"><value name="text"><block type="text_join" id="4QZixCMI=*0=!kSk=D:l"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="xVjwN,/88aT4M#gRf`2g"><field name="TEXT">SCORE: </field></shadow></value><value name="ADD1"><shadow type="text" id="H?e24XX~s5GH.99rQ.L["><field name="TEXT"></field></shadow><block type="variables_get" id="}}:U~0Qv4=y-ZVg)3g36"><field name="VAR" id="fMCO*r,aQyav[44x(*jo">gameScore</field></block></value></block></value><next><block type="device_print_message" id="*kv57V.:=q7OB4^Q=FLw"><value name="text"><shadow type="text" id="OUMUEI8K!Ac.cOq~~%n,"><field name="TEXT">A+B TO RESET</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block></xml>